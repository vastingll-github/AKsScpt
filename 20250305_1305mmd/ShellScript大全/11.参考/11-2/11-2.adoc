link:#start-of-content[Skip to content]
[.progress-pjax-loader .Progress .position-fixed .width-full]#
[.Progress-item .progress-pjax-loader-bar .left-0 .top-0 .color-bg-accent-emphasis]##
#

== Navigation Menu

[.d-none]#Toggle navigation#

[.Button-content]# [.Button-label]###

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_12.svg

link:/login?return_to=https%3A%2F%2Fgithub.com%2Fshellspec%2Fshellspec[Sign
in]

* Product
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_18.svg
+
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_20.svg
+
GitHub Copilot

Write better code with AI
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_25.svg
+
Security

Find and fix vulnerabilities
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_30.svg
+
Actions

Automate any workflow
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_35.svg
+
Codespaces

Instant dev environments
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_40.svg
+
Issues

Plan and track work
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_45.svg
+
Code Review

Manage code changes
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_50.svg
+
Discussions

Collaborate outside of code
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_55.svg
+
Code Search

Find more, search less

[#product-explore-heading .d-block .h4 .color-fg-default .my-1]#Explore#

** https://github.com/features[All features]
** https://docs.github.com[Documentation
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_65.svg
** https://skills.github.com[GitHub Skills
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_67.svg
** https://github.blog[Blog
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_69.svg
* Solutions
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_71.svg
+
[#solutions-by-company-size-heading .d-block .h4 .color-fg-default .my-1]#By
company size#

** https://github.com/enterprise[Enterprises]
** https://github.com/team[Small and medium teams]
** https://github.com/enterprise/startups[Startups]
** link:/solutions/industry/nonprofits[Nonprofits]

[#solutions-by-use-case-heading .d-block .h4 .color-fg-default .my-1]#By
use case#

** link:/solutions/use-case/devsecops[DevSecOps]
** link:/solutions/use-case/devops[DevOps]
** link:/solutions/use-case/ci-cd[CI/CD]
** link:/solutions/use-case[View all use cases]

[#solutions-by-industry-heading .d-block .h4 .color-fg-default .my-1]#By
industry#

** link:/solutions/industry/healthcare[Healthcare]
** link:/solutions/industry/financial-services[Financial services]
** link:/solutions/industry/manufacturing[Manufacturing]
** link:/solutions/industry/government[Government]
** link:/solutions/industry[View all industries]

link:/solutions[View all solutions
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_99.svg
* Resources
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_101.svg
+
[#resources-topics-heading .d-block .h4 .color-fg-default .my-1]#Topics#

** link:/resources/articles/ai[AI]
** link:/resources/articles/devops[DevOps]
** link:/resources/articles/security[Security]
** link:/resources/articles/software-development[Software Development]
** link:/resources/articles[View all]

[#resources-explore-heading .d-block .h4 .color-fg-default .my-1]#Explore#

** https://resources.github.com/learn/pathways[Learning Pathways
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_114.svg
** https://resources.github.com[Events & Webinars
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_116.svg
** https://github.com/resources/whitepapers[Ebooks & Whitepapers]
** https://github.com/customer-stories[Customer Stories]
** https://partner.github.com[Partners
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_120.svg
** https://github.com/solutions/executive-insights[Executive Insights]
* Open Source
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_123.svg
+
** link:/sponsors[]
+
GitHub Sponsors

Fund open source developers

** https://github.com/readme[]
+
The ReadME Project

GitHub community articles

[#open-source-repositories-heading .d-block .h4 .color-fg-default .my-1]#Repositories#

** https://github.com/topics[Topics]
** https://github.com/trending[Trending]
** https://github.com/collections[Collections]
* Enterprise
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_143.svg
+
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_145.svg
+
Enterprise platform

AI-powered developer platform

[#enterprise-available-add-ons-heading .d-block .h4 .color-fg-default .my-1]#Available
add-ons#

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_154.svg
+
Advanced Security

Enterprise-grade security features
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_159.svg
+
Copilot for business

Enterprise-grade AI features
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_164.svg
+
Premium Support

Enterprise-grade 24/7 support
* https://github.com/pricing[Pricing]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_171.svg

[.flex-1]#Search or jump to...#

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_175.svg

[[search-suggestions-dialog-header]]
=== Search code, repositories, users, issues, pull requests...

Search

[#query-builder-test-leadingvisual-wrap .FormControl-input-leadingVisualWrap .QueryBuilder-leadingVisualWrap]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_183.svg
#

[#query-builder-test-clear .sr-only]#Clear#

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_188.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_190.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_191.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_192.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_193.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_194.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_195.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_196.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_197.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_198.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_199.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_200.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_201.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_202.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_203.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_204.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_205.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_206.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_207.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_208.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_209.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_210.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_211.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_212.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_213.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_214.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_215.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_216.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_217.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_218.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_219.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_220.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_221.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_222.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_223.svg

[[validation-da2c33fb-2735-49ec-b870-f2ab38e0fb54]]
[.FormControl-inlineValidation--visual]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_227.svg
#

https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax[Search
syntax tips]

[[feedback-dialog-title]]
=== Provide feedback

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_236.svg

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

Cancel

Submit feedback

[[custom-scopes-dialog-title]]
=== Saved searches

[[custom-scopes-dialog-description]]
==== Use saved searches to filter your results more quickly

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_252.svg

Name

Query

To see all available qualifiers, see our
https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax[documentation].

Cancel

Create saved search

link:/login?return_to=https%3A%2F%2Fgithub.com%2Fshellspec%2Fshellspec[Sign
in]

link:/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=shellspec%2Fshellspec[Sign
up]

Reseting focus

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_273.svg
[.js-stale-session-flash-signed-in]#You signed in with another tab or
window. link:[Reload] to refresh your session.#
[.js-stale-session-flash-signed-out]#You signed out in another tab or
window. link:[Reload] to refresh your session.#
[.js-stale-session-flash-switched]#You switched accounts on another tab
or window. link:[Reload] to refresh your session.#

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_281.svg

Dismiss alert

[[start-of-content]]

[[js-flash-container]]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_288.svg

\{\{ message }}

[[js-repo-pjax-container]]
[[repository-container-header]]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_294.svg
[.author .flex-self-stretch]# link:/shellspec[shellspec] #
[.mx-1 .flex-self-stretch .color-fg-muted]#/#
*link:/shellspec/shellspec[shellspec]*
[.Label .Label--secondary .v-align-middle .mr-1]#Public#

[[repository-details-container]]
* {blank}
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_302.svg
You must be signed in to change notification settings
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_304.svg
[#repo-network-counter .Counter]#73#]
* {blank}
+
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_308.svg
Star # [#repo-stars-counter-star .Counter .js-social-count]#1.2k#]

[[responsive-meta-container]]
A full-featured BDD unit testing framework for bash, ksh, zsh, dash and
all POSIX shells

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_315.svg
[.flex-auto .min-width-0 .css-truncate .css-truncate-target .width-fit]#
https://shellspec.info[shellspec.info] #

== License

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_321.svg
MIT license]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_324.svg
[.text-bold]#1.2k# stars]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_326.svg
[.text-bold]#73# forks]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_328.svg
Branches]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_330.svg
Tags]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_332.svg
Activity]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_335.svg
Star #]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_338.svg
You must be signed in to change notification settings

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_341.svg
Code [#code-repo-tab-count .Counter]##]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_343.svg
Issues [#issues-repo-tab-count .Counter]#85#]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_345.svg
Pull requests [#pull-requests-repo-tab-count .Counter]#9#]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_347.svg
Discussions [#discussions-repo-tab-count .Counter]##]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_349.svg
Actions [#actions-repo-tab-count .Counter]##]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_351.svg
Projects [#projects-repo-tab-count .Counter]#0#]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_353.svg
Wiki [#wiki-repo-tab-count .Counter]##]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_355.svg
Security]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_357.svg
Insights [#insights-repo-tab-count .Counter]##]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_360.svg

Additional navigation options

* link:/shellspec/shellspec[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_365.svg
# [.ActionListItem-label]# Code #]
* link:/shellspec/shellspec/issues[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_368.svg
# [.ActionListItem-label]# Issues #]
* link:/shellspec/shellspec/pulls[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_371.svg
# [.ActionListItem-label]# Pull requests #]
* link:/shellspec/shellspec/discussions[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_374.svg
# [.ActionListItem-label]# Discussions #]
* link:/shellspec/shellspec/actions[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_377.svg
# [.ActionListItem-label]# Actions #]
* link:/shellspec/shellspec/projects[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_380.svg
# [.ActionListItem-label]# Projects #]
* link:/shellspec/shellspec/wiki[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_383.svg
# [.ActionListItem-label]# Wiki #]
* link:/shellspec/shellspec/security[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_386.svg
# [.ActionListItem-label]# Security #]
* link:/shellspec/shellspec/pulse[[.ActionListItem-visual .ActionListItem-visual--leading]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_389.svg
# [.ActionListItem-label]# Insights #]

[[repo-content-pjax-container]]
== shellspec/shellspec

[.Box-sc-g0xbh4-0 .gUkoLg .prc-Button-ButtonContent-HKbr-]#[.prc-Button-Label-pTQ3x]###

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_397.svg

[.Text__StyledText-sc-17v1xeu-0 .eMMFM]#Â master#

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_401.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_403.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_405.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_407.svg

[.prc-Button-ButtonContent-HKbr-]#[.prc-Button-Label-pTQ3x]#Go to file##

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_411.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_413.svg

=== Folders and files

[width="100%",cols="20%,20%,20%,20%,20%",options="header",]
|===
|[.text-bold]#Name# | |[.text-bold]#Name# a|
[.text-bold]#Last commit message#

a|
[.text-bold]#Last commit date#

a|
=== Latest commit

Â 

=== History

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_432.svg
Commits###]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_435.svg

| | | |

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_440.svg

link:/shellspec/shellspec/tree/master/.dockerhub[.dockerhub]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_445.svg

link:/shellspec/shellspec/tree/master/.dockerhub[.dockerhub]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_456.svg

link:/shellspec/shellspec/tree/master/.github[.github]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_461.svg

link:/shellspec/shellspec/tree/master/.github[.github]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_472.svg

link:/shellspec/shellspec/tree/master/bin[bin]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_477.svg

link:/shellspec/shellspec/tree/master/bin[bin]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_488.svg

link:/shellspec/shellspec/tree/master/contrib[contrib]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_493.svg

link:/shellspec/shellspec/tree/master/contrib[contrib]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_504.svg

link:/shellspec/shellspec/tree/master/dockerfiles[dockerfiles]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_509.svg

link:/shellspec/shellspec/tree/master/dockerfiles[dockerfiles]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_520.svg

link:/shellspec/shellspec/tree/master/docs[docs]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_525.svg

link:/shellspec/shellspec/tree/master/docs[docs]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_536.svg

link:/shellspec/shellspec/tree/master/examples[examples]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_541.svg

link:/shellspec/shellspec/tree/master/examples[examples]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_552.svg

link:/shellspec/shellspec/tree/master/helper[helper]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_557.svg

link:/shellspec/shellspec/tree/master/helper[helper]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_568.svg

link:/shellspec/shellspec/tree/master/lib[lib]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_573.svg

link:/shellspec/shellspec/tree/master/lib[lib]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_584.svg

link:/shellspec/shellspec/tree/master/libexec[libexec]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_589.svg

link:/shellspec/shellspec/tree/master/libexec[libexec]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_600.svg

link:/shellspec/shellspec/tree/master/spec[spec]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_605.svg

link:/shellspec/shellspec/tree/master/spec[spec]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_616.svg

link:/shellspec/shellspec/tree/master/stub[stub]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_621.svg

link:/shellspec/shellspec/tree/master/stub[stub]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_632.svg

link:/shellspec/shellspec/blob/master/.codecov.yml[.codecov.yml]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_637.svg

link:/shellspec/shellspec/blob/master/.codecov.yml[.codecov.yml]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_648.svg

link:/shellspec/shellspec/blob/master/.dockerignore[.dockerignore]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_653.svg

link:/shellspec/shellspec/blob/master/.dockerignore[.dockerignore]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_664.svg

link:/shellspec/shellspec/blob/master/.gitattributes[.gitattributes]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_669.svg

link:/shellspec/shellspec/blob/master/.gitattributes[.gitattributes]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_680.svg

link:/shellspec/shellspec/blob/master/.gitignore[.gitignore]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_685.svg

link:/shellspec/shellspec/blob/master/.gitignore[.gitignore]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_696.svg

link:/shellspec/shellspec/blob/master/.shellcheck-version[.shellcheck-version]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_701.svg

link:/shellspec/shellspec/blob/master/.shellcheck-version[.shellcheck-version]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_712.svg

link:/shellspec/shellspec/blob/master/.shellcheckrc[.shellcheckrc]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_717.svg

link:/shellspec/shellspec/blob/master/.shellcheckrc[.shellcheckrc]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_728.svg

link:/shellspec/shellspec/blob/master/.shellspec[.shellspec]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_733.svg

link:/shellspec/shellspec/blob/master/.shellspec[.shellspec]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_744.svg

link:/shellspec/shellspec/blob/master/CHANGELOG.md[CHANGELOG.md]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_749.svg

link:/shellspec/shellspec/blob/master/CHANGELOG.md[CHANGELOG.md]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_760.svg

link:/shellspec/shellspec/blob/master/CONTRIBUTING.md[CONTRIBUTING.md]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_765.svg

link:/shellspec/shellspec/blob/master/CONTRIBUTING.md[CONTRIBUTING.md]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_776.svg

link:/shellspec/shellspec/blob/master/LICENSE[LICENSE]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_781.svg

link:/shellspec/shellspec/blob/master/LICENSE[LICENSE]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_792.svg

link:/shellspec/shellspec/blob/master/Makefile[Makefile]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_797.svg

link:/shellspec/shellspec/blob/master/Makefile[Makefile]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_808.svg

link:/shellspec/shellspec/blob/master/README.md[README.md]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_813.svg

link:/shellspec/shellspec/blob/master/README.md[README.md]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_824.svg

link:/shellspec/shellspec/blob/master/install.sh[install.sh]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_829.svg

link:/shellspec/shellspec/blob/master/install.sh[install.sh]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_840.svg

link:/shellspec/shellspec/blob/master/package.json[package.json]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_845.svg

link:/shellspec/shellspec/blob/master/package.json[package.json]

a|
Â 

a|
Â 

a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_856.svg

link:/shellspec/shellspec/blob/master/shellspec[shellspec]

| a|
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_861.svg

link:/shellspec/shellspec/blob/master/shellspec[shellspec]

a|
Â 

a|
Â 

a|
View all files

| | | |
|===

=== Repository files navigation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_879.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_880.svg
license]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_883.svg

=== ShellSpec: full-featured BDD unit testing framework

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_887.svg

ShellSpec is a *full-featured
https://en.wikipedia.org/wiki/Behavior-driven_development[BDD] unit
testing framework* for dash, bash, ksh, zsh and *all POSIX shells* that
provides first-class features such as code coverage, mocking,
parameterized test, parallel execution and more. It was developed as a
dev/test tool for *cross-platform shell scripts and shell script
libraries*. ShellSpec is a new modern testing framework released in
2019, but it's already stable enough. With lots of practical CLI
features and simple yet powerful syntax, it provides you with a fun
shell script test environment.

https://github.com/shellspec/shellspec/actions/workflows/ubuntu-jammy.yml[image:https://camo.githubusercontent.com/7e118357b9e1f0184314e95b694912289303c59d71e3383767a602b285693587/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f7562756e74752d6a616d6d792e796d6c3f6c6162656c3d5562756e7475267374796c653d666c61742d737175617265[Ubuntu]]
https://github.com/shellspec/shellspec/actions/workflows/macos-sonoma.yml[image:https://camo.githubusercontent.com/1bbee4b022ce8f3b7c37dbd83adae2b003203d1f4d247626692ac24cc845551c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f6d61636f732d736f6e6f6d612e796d6c3f6c6162656c3d6d61634f53267374796c653d666c61742d737175617265[macOS]]
https://github.com/shellspec/shellspec/actions/workflows/freebsd-14.yml[image:https://camo.githubusercontent.com/4076d96df7fcc8f47d1d5096f4a6119be16692c7863ce41690c624a940d6699d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f667265656273642d31342e796d6c3f6c6162656c3d46726565425344267374796c653d666c61742d737175617265[FreeBSD]]
https://github.com/shellspec/shellspec/actions/workflows/netbsd-10.yml[image:https://camo.githubusercontent.com/52c8e21aac78a4405e502a7f98cb98bce031ee286e5a65f9f0c7766bfb56dfb0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f6e65746273642d31302e796d6c3f6c6162656c3d4e6574425344267374796c653d666c61742d737175617265[NetBSD]]
https://github.com/shellspec/shellspec/actions/workflows/openbsd7.5.yml[image:https://camo.githubusercontent.com/8470e505a5b48d8dec858d755ba4341985db44396cfaff54ff74c574d11066bd/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f6f70656e627364372e352e796d6c3f6c6162656c3d4f70656e425344267374796c653d666c61742d737175617265[OpenBSD]]
https://github.com/shellspec/shellspec/actions/workflows/dragonflybsd-6.4.yml[image:https://camo.githubusercontent.com/507f84817d52feb44e6e0e117e8be45084a804f9393fe7162c9b6959da41305f/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f647261676f6e666c796273642d362e342e796d6c3f6c6162656c3d447261676f6e466c79425344267374796c653d666c61742d737175617265[DragonFlyBSD]]
https://github.com/shellspec/shellspec/actions/workflows/solaris-11.4.yml[image:https://camo.githubusercontent.com/c85579702e3a05b8f4074b8ddf62b188f795e99ef68feb671ad7024de4b3a533/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f736f6c617269732d31312e342e796d6c3f6c6162656c3d536f6c617269733131267374796c653d666c61742d737175617265[Solaris11]] +
https://github.com/shellspec/shellspec/actions/workflows/windows-gitbash.yml[image:https://camo.githubusercontent.com/783435523fb0914a2a83a3298e1778147b9732ef398369fcdf5e6887d32c156c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f77696e646f77732d676974626173682e796d6c3f6c6162656c3d57696e646f7773253230286769746261736829267374796c653d666c61742d737175617265[gitbash]]
https://github.com/shellspec/shellspec/actions/workflows/windows-cygwin.yml[image:https://camo.githubusercontent.com/1d948f2d1dbb3162531a057ae4d65931b8bc69acb1e9c0af04c652edc827db75/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f77696e646f77732d63796777696e2e796d6c3f6c6162656c3d57696e646f77732532302863796777696e29267374796c653d666c61742d737175617265[cygwin]]
https://github.com/shellspec/shellspec/actions/workflows/windows-msys.yml[image:https://camo.githubusercontent.com/bf689e44e89360b03f05a8f666a622f10da84ddd885bd0596ad3aaf46ab3b3a6/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f77696e646f77732d6d7379732e796d6c3f6c6162656c3d57696e646f7773253230286d73797329267374796c653d666c61742d737175617265[msys]]
https://github.com/shellspec/shellspec/actions/workflows/windows-busybox.yml[image:https://camo.githubusercontent.com/c1be3d240fd40f14de39c50ec92cac6fc870234007ae8c142f3c4ca0981873f1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f7368656c6c737065632f7368656c6c737065632f77696e646f77732d62757379626f782e796d6c3f6c6162656c3d57696e646f77732532302862757379626f7829267374796c653d666c61742d737175617265[busybox]] +
https://www.codefactor.io/repository/github/shellspec/shellspec[image:https://camo.githubusercontent.com/d4c9cd2c074b5a43410227b97ba7eb7d6a2839da332b49fbbbece782151f4d86/68747470733a2f2f696d672e736869656c64732e696f2f636f6465666163746f722f67726164652f6769746875622f7368656c6c737065632f7368656c6c737065633f6c6162656c3d436f6465466163746f72267374796c653d666c61742d737175617265[CodeFactor
Grade]]
https://codeclimate.com/github/shellspec/shellspec[image:https://camo.githubusercontent.com/0cf4a1e4affb6a99f375b2f31ff98fd1325f304e087bf6bb55464a2dfced931e/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636c696d6174652f636f7665726167652f7368656c6c737065632f7368656c6c737065633f6c6162656c3d436f6465436c696d617465267374796c653d666c61742d737175617265[Code
Climate]]
https://codecov.io/gh/shellspec/shellspec[image:https://camo.githubusercontent.com/b2bcdbe91de7c77439664517cdf4722197cd269cc20fd998af630df5789b4105/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636f762f632f6769746875622f7368656c6c737065632f7368656c6c737065632e7376673f6c6162656c3d436f6465636f76267374796c653d666c61742d737175617265[Codecov]]
https://shellspec.github.io/shellspec/[image:https://camo.githubusercontent.com/19036d2fddfd39c30d2d96c58647874fce3a59207fc46ed083b9fe3585fc8fe3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f64796e616d69632f6a736f6e3f75726c3d68747470732533412532462532467368656c6c737065632e6769746875622e696f2532467368656c6c73706563253246636f7665726167652e6a736f6e2671756572793d70657263656e745f636f7665726564266c6162656c3d4b636f76267375666669783d253235267374796c653d666c61742d737175617265[Kcov]]
https://hub.docker.com/r/shellspec/shellspec[image:https://camo.githubusercontent.com/54a2c54d6bae7918f330722458d45777286138fdc76f514e600544fe576d5ee4/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f636c6f75642f6175746f6d617465642f7368656c6c737065632f7368656c6c737065633f7374796c653d666c61742d737175617265266c6162656c3d446f636b6572487562[Docker
Cloud Automated build]]
https://github.com/shellspec/shellspec/search?l=Shell[image:https://camo.githubusercontent.com/8512444bf73e06ec6a42067c968414fd6b721dece065abcb3ab18dbf6cb4bddf/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f746f702f7368656c6c737065632f7368656c6c737065632e7376673f7374796c653d666c61742d737175617265[GitHub
top language]]
https://github.com/shellspec/shellspec/releases/latest[image:https://camo.githubusercontent.com/76cf2f2eb256420d954e577c2f80f78e65e669b2f1713c78f1758379a501eec6/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f7368656c6c737065632f7368656c6c737065632e7376673f7374796c653d666c61742d737175617265[GitHub
release]]
https://github.com/shellspec/shellspec/blob/master/LICENSE[image:https://camo.githubusercontent.com/43ff58fcdcda683c00f5c939754c19737d64e3b2325a3e055a1ecd23ebf4e8b0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f7368656c6c737065632f7368656c6c737065632e7376673f7374796c653d666c61742d737175617265[License]] +
https://www.gnu.org/software/bash/[image:https://camo.githubusercontent.com/c4d9352e2c3bdff82dedaff54caf3586cfd5b3eba4e7dc72d208a239ef1c109c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f626173682d254532253839254135322e30332d6c69676874677265792e7376673f7374796c653d666c6174[bash]]
https://codeberg.org/schilytools/schilytools[image:https://camo.githubusercontent.com/26aef6afd18b79fab16a1234f303277a8f6fdb16921f897795dc0931f0d55aac/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f626f73682d25453225383925413532303138253246313025324630372d6c69676874677265792e7376673f7374796c653d666c6174[bosh]]
https://www.busybox.net/[image:https://camo.githubusercontent.com/3934d25d0c66a026facfda429a3e057438b2e2a8cc38a5e3dee84140cec59e2e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f62757379626f782d254532253839254135312e32302e302d6c69676874677265792e7376673f7374796c653d666c6174[busybox]]
http://gondor.apana.org.au/~herbert/dash/[image:https://camo.githubusercontent.com/ed7f501c76e61ee9f420e5e64aaa64a344a4d3683c142931c7d9f4df34dcd011/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646173682d254532253839254135302e352e342d6c69676874677265792e7376673f7374796c653d666c6174[dash]]
https://github.com/ksh93/ksh[image:https://camo.githubusercontent.com/65374667873dc2528ae0eed699e28070fee7b8a3222ebfae95309b1939026fb6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6b73682d2545322538392541353933722d6c69676874677265792e7376673f7374796c653d666c6174[ksh]]
http://www.mirbsd.org/mksh.htm[image:https://camo.githubusercontent.com/28d32d75c8a56438013ea3ff55b9b0380aa8a49eec23c2e9e6c10bed8d00708a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d6b73682d2545322538392541355232382d6c69676874677265792e7376673f7374796c653d666c6174[mksh]]
https://salsa.debian.org/clint/posh[image:https://camo.githubusercontent.com/d836a13b791b4fa9269ff7755b07be11f91a6a822aa56ce358b21ab2c74ea72b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706f73682d254532253839254135302e332e31342d6c69676874677265792e7376673f7374796c653d666c6174[posh]]
https://magicant.github.io/yash/[image:https://camo.githubusercontent.com/ed463c867fe23a7bcd0ccab8370bfa6d2bbd9b09de265033d945efffc5d1808d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f796173682d254532253839254135322e32392d6c69676874677265792e7376673f7374796c653d666c6174[yash]]
https://www.zsh.org/[image:https://camo.githubusercontent.com/f0b8c088973f691d3842f82dca99cc60067c532ff86acf2e2f64e860ce48e46c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7a73682d254532253839254135332e312e392d6c69676874677265792e7376673f7374796c653d666c6174[zsh]]

'''''

*Version 0.28.0* has a lot of enhancements in the CLI. It is basically
compatible, but there are some changes that you need to be aware of. See
https://github.com/shellspec/shellspec/wiki/Migration-Guide-to-Version-0.28.0[Migration
Guide to Version 0.28.0] for details.

'''''

*Thank you for your interest in ShellSpec. Please visit
ğŸš©https://shellspec.info/[the official website] to know the impressive
features!*

Let's have fun testing your shell scripts! (Try
https://shellspec.info/demo[Online Demo] on your browser).

https://shellspec.info/demo[image:/shellspec/shellspec/raw/master/docs/demo.gif[demo]]

https://circleci.com/api/v1.1/project/github/shellspec/shellspec/latest/artifacts/0/coverage/index.html?branch=master[image:/shellspec/shellspec/raw/master/docs/coverage.png[Coverage
report]]

*Latest Update.*

See link:/shellspec/shellspec/blob/master/CHANGELOG.md[CHANGELOG.md]

NOTE: This documentation contains unreleased features. Check them in the
changelog.

'''''

=== Table of Contents

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_966.svg

* link:#supported-shells-and-platforms[Supported shells and platforms]
* link:#requirements[Requirements]
* link:#installation[Installation]
** link:#web-installer-for-developers[Web installer (for developers)]
** link:#package-manager[Package manager]
** link:#manual-installation[Manual installation]
** link:#distribution-archive-runtime-only[Distribution archive (runtime
only)]
* link:#tutorial[Tutorial]
* link:#shellspec-cli[ShellSpec CLI]
** link:#runs-specfile-using-binsh-by-default[runs specfile using
`/bin/sh` by default]
** link:#command-options[command options]
* link:#project-directory[Project directory]
** link:#typical-directory-structure[Typical directory structure]
** link:#options-file[Options file]
** link:++#shellspec---project-options-file++[`.shellspec` - project
options file]
** link:++#shellspec-local---user-custom-options-file++[`.shellspec-local`
- user custom options file]
** link:++#shellspec-basedir---specfile-execution-base-directory++[`.shellspec-basedir`
- specfile execution base directory]
** link:++#shellspec-quicklog---quick-execution-log++[`.shellspec-quick.log`
- quick execution log]
** link:++#report---report-file-directory++[`report/` - report file
directory]
** link:++#coverage---coverage-reports-directory++[`coverage/` -
coverage reports directory]
** link:++#spec---default-specfiles-directory++[`spec/` - (default)
specfiles directory]
** link:#helperdir-default-spec[<HELPERDIR> (default: `spec/`)]
*** link:++#spec_helpersh---default-helper-file-for-specfile++[`spec_helper.sh`
- (default) helper file for specfile]
*** link:++#bannermd---banner-file-displayed-at-test-execution++[`banner[.md]`
- banner file displayed at test execution]
*** link:++#support---directory-for-support-files++[`support/` -
directory for support files]
**** link:++#bin---directory-for-support-commands++[`bin` - directory
for support commands]
* link:#specfile-test-file[Specfile (test file)]
** link:#example[Example]
** link:#about-dsl[About DSL]
** link:#execution-directory[Execution directory]
** link:#embedded-shell-scripts[Embedded shell scripts]
** link:#translation-process[Translation process]
** link:#syntax-formatter-altshfmt[Syntax formatter (`altshfmt`)]
* link:#dsl-syntax[DSL syntax]
** link:#basic-structure[Basic structure]
*** link:++#describe-context-examplegroup---example-group-block++[`Describe`&#44;
`Context`&#44; `ExampleGroup` - example group block]
*** link:++#it-specify-example---example-block++[`It`&#44;
`Specify`&#44; `Example` - example block]
*** link:++#todo---one-liner-empty-example++[`Todo` - one liner empty
example]
*** link:++#when---evaluation++[`When` - evaluation]
**** link:++#call---call-a-shell-function-without-subshell++[`call` -
call a shell function (without subshell)]
**** link:++#run---run-a-command-within-subshell++[`run` - run a command
(within subshell)]
***** link:++#command---runs-an-external-command++[`command` - runs an
external command]
***** link:++#script---runs-a-shell-script++[`script` - runs a shell
script]
***** link:++#source---runs-a-script-by--dot-command++[`source` - runs a
script by `.` (dot) command]
**** link:#about-executing-aliases[About executing aliases]
*** link:++#the---expectation++[`The` - expectation]
**** link:#subjects[Subjects]
**** link:#modifiers[Modifiers]
**** link:#matchers[Matchers]
**** link:#language-chains[Language chains]
*** link:++#assert---expectation-for-custom-assertion++[`Assert` -
expectation for custom assertion]
** link:#pending-skip-and-focus[Pending&#44; skip and focus]
*** link:++#pending---pending-example++[`Pending` - pending example]
*** link:++#skip---skip-example++[`Skip` - skip example]
**** link:++#if---conditional-skip++[`if` - conditional skip]
*** link:#x-prefix-for-example-group-and-example['x' prefix for example
group and example]
**** link:++#xdescribe-xcontext-xexamplegroup---skipped-example-group++[`xDescribe`&#44;
`xContext`&#44; `xExampleGroup` - skipped example group]
**** link:++#xit-xspecify-xexample---skipped-example++[`xIt`&#44;
`xSpecify`&#44; `xExample` - skipped example]
*** link:#f-prefix-for-example-group-and-example['f' prefix for example
group and example]
**** link:++#fdescribe-fcontext-fexamplegroup---focused-example-group++[`fDescribe`&#44;
`fContext`&#44; `fExampleGroup` - focused example group]
**** link:++#fit-fspecify-fexample---focused-example++[`fIt`&#44;
`fSpecify`&#44; `fExample` - focused example]
*** link:#about-temporary-pending-and-skip[About temporary pending and
skip]
** link:#hooks[Hooks]
*** link:++#beforeeach-before-aftereach-after---example-hook++[`BeforeEach`
(`Before`)&#44; `AfterEach` (`After`) - example hook]
*** link:++#beforeall-afterall---example-group-hook++[`BeforeAll`&#44;
`AfterAll` - example group hook]
*** link:++#beforecall-aftercall---call-evaluation-hook++[`BeforeCall`&#44;
`AfterCall` - call evaluation hook]
*** link:++#beforerun-afterrun---run-evaluation-hook++[`BeforeRun`&#44;
`AfterRun` - run evaluation hook]
*** link:#pitfalls[Pitfalls]
** link:#helpers[Helpers]
*** link:++#dump---dump-stdout-stderr-and-status-for-debugging++[`Dump`
- dump stdout&#44; stderr&#44; and status for debugging]
*** link:++#include---include-a-script-file++[`Include` - include a
script file]
*** link:++#set---set-shell-options++[`Set` - set shell options]
*** link:++#path-file-dir---path-alias++[`Path`&#44; `File`&#44; `Dir` -
path alias]
*** link:++#data---pass-data-as-stdin-to-evaluation++[`Data` - pass data
as stdin to evaluation]
*** link:++#parameters---parameterized-example++[`Parameters` -
parameterized example]
*** link:++#mock---create-a-command-based-mock++[`Mock` - create a
command-based mock]
*** link:++#intercept---create-an-intercept-point++[`Intercept` - create
an intercept point]
* link:#directives[Directives]
** link:++#const----constant-definition++[`%const` (`%`) - constant
definition]
** link:++#text---embedded-text++[`%text` - embedded text]
** link:++#puts---putsn----output-a-string-with-newline++[`%puts`
(`%-`)&#44; `%putsn` (`%=`) - output a string (with newline)]
** link:++#printf---alias-for-printf++[`%printf` - alias for printf]
** link:++#sleep---alias-for-sleep++[`%sleep` - alias for sleep]
** link:++#preserve---preserve-variables++[`%preserve` - preserve
variables]
** link:++#logger---debug-output++[`%logger` - debug output]
** link:++#data---define-parameter++[`%data` - define parameter]
* link:#mocking[Mocking]
** link:#function-based-mock[Function-based mock]
** link:#command-based-mock[Command-based mock]
* link:#support-commands[Support commands]
** link:#execute-the-actual-command-within-a-mock-function[Execute the
actual command within a mock function]
** link:#make-mock-not-mandatory-in-sandbox-mode[Make mock not mandatory
in sandbox mode]
** link:#resolve-command-incompatibilities[Resolve command
incompatibilities]
* link:#tagging[Tagging]
* link:#about-testing-external-commands[About testing external commands]
* link:#how-to-test-a-single-file-shell-script[How to test a single file
shell script]
** link:#using-run-script[Using `run script`]
** link:#using-run-source[Using `run source`]
** link:#testing-shell-functions[Testing shell functions]
*** link:#__sourced__[`__SOURCED__`]
** link:#intercepting[Intercepting]
*** link:#intercept[`Intercept`]
*** link:++#test--__---++[`test || __() { :; }`]
*** link:#__[`__`]
* link:#spec_helper[spec_helper]
** link:#module_precheck[`<module>_precheck`]
*** link:#minimum_version[`minimum_version`]
*** link:#error-warn-info[`error`&#44; `warn`&#44; `info`]
*** link:#abort[`abort`]
*** link:#setenv-unsetenv[`setenv`&#44; `unsetenv`]
*** link:#environment-variables[environment variables]
** link:#module_loaded[`<module>_loaded`]
** link:#module_configure[`<module>_configure`]
*** link:#import[`import`]
*** link:#before_each-after_each[`before_each`&#44; `after_each`]
*** link:#before_all-after_all[`before_all`&#44; `after_all`]
* link:#self-executable-specfile[Self-executable specfile]
* link:#use-with-docker[Use with Docker]
* link:#extension[Extension]
** link:#custom-subject-modifier-and-matcher[Custom subject&#44;
modifier and matcher]
* link:#code-coverage[Code Coverage]
** link:#supported-shells[Supported shells]
** link:#measurement-target[Measurement target]
** link:#coverage-report[Coverage report]
* link:#for-developers[For developers]
** link:#subprojects[Subprojects]
*** link:++#shellmetrics---cyclomatic-complexity-analyzer-for-shell-scripts++[ShellMetrics
- Cyclomatic Complexity Analyzer for shell scripts]
*** link:++#shellbench---a-benchmark-utility-for-posix-shell-comparison++[ShellBench
- A benchmark utility for POSIX shell comparison]
*** link:++#altshfmt---altsh-alternative-shell-script-formatter++[altshfmt
- AltSH (alternative shell script) formatter]
** link:#related-projects[Related projects]
*** link:++#getoptions---an-elegant-option-parser-and-generator-for-shell-scripts++[getoptions
- An elegant option parser and generator for shell scripts]
*** link:++#readlinkf---readlink--f-implementation-for-shell-scripts++[readlinkf
- readlink -f implementation for shell scripts]
*** link:++#portable-echo---portable-echo-shell-function-for-posix-compliant-shells++[portable-echo
- Portable echo shell function for POSIX compliant shells]
** link:#inspired-frameworks[Inspired frameworks]
** link:#contributions[Contributions]

=== Supported shells and platforms

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1160.svg

* https://www.gnu.org/software/bash/[`bash`]_>=2.03_,
http://schilytools.sourceforge.net/bosh.html[`bosh/pbosh`]_>=2018/10/07_,
https://salsa.debian.org/clint/posh[`posh`]_>=0.3.14_,
https://yash.osdn.jp/[`yash`]_>=2.29_,
https://www.zsh.org/[`zsh`]_>=3.1.9_
* http://gondor.apana.org.au/~herbert/dash/[`dash`]_>=0.5.4_,
https://www.busybox.net/[`busybox`]` ash`_>=1.20.0_,
https://frippery.org/busybox/[`busybox-w32`],
https://github.com/hvdijk/gwsh[`GWSH`]_>=20190627_
* `ksh88`, http://kornshell.org[`ksh93`]_>=93s_,
https://github.com/ksh-community/ksh[`ksh2020`],
http://www.mirbsd.org/mksh.htm[`mksh/lksh`]_>=R28_,
https://web.archive.org/web/20160918190548/http://www.cs.mun.ca:80/~michael/pdksh/[`pdksh`]_>=5.2.14_
* https://www.freebsd.org/cgi/man.cgi?sh(1)[`FreeBSD sh`],
http://cvsweb.netbsd.org/bsdweb.cgi/src/bin/sh/[`NetBSD sh`],
http://cvsweb.netbsd.org/bsdweb.cgi/src/bin/ksh/[`NetBSD ksh`],
https://man.openbsd.org/ksh.1[`OpenBSD ksh`],
https://github.com/dimkr/loksh[`loksh`],
https://github.com/ibara/oksh[`oksh`]

[cols=",",options="header",]
|===
|Platform |Test
|Linux (Debian, Ubuntu, Fedora, CentOS, Alpine, Busybox, OpenWrt)
|https://github.com/shellspec/shellspec/actions[GitHub Actions] or
link:/shellspec/shellspec/blob/master/dockerfiles[Docker]

|macOS (Default installed shells, Homebrew)
|https://github.com/shellspec/shellspec/actions[GitHub Actions]

|Windows (Git bash, msys2, cygwin, busybox-w32, WSL)
|https://github.com/shellspec/shellspec/actions[GitHub Actions]

|BSD (FreeBSD, OpenBSD, NetBSD)
|https://cirrus-ci.com/github/shellspec/shellspec[Cirrus CI] (FreeBSD)
or Manual (Others)

|Unix (Solaris, AIX) |Manual only
|===

link:/shellspec/shellspec/blob/master/docs/shells.md[Tested version
details]

=== Requirements

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1207.svg

=== POSIX-compliant commands

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1211.svg

ShellSpec uses shell built-in commands and only few basic
http://pubs.opengroup.org/onlinepubs/9699919799/utilities/contents.html[POSIX-compliant
commands] to support wide range of environments (except `kcov` for
optional code coverage).

Currently used external (not shell builtins) commands:

* `cat`, `date`, `env`, `ls`, `mkdir`, `od` (or not POSIX `hexdump`),
`rm`, `sleep`, `sort`, `time`
* `ps` (use to auto-detect shells in environments that don't implement
procfs)
* `ln`, `mv` (use only when generating coverage report)
* `kill`, `printf` (most shells except some are built-in)

=== Installation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1229.svg

=== Web installer (for developers)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1233.svg

=== Install the latest release version

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1237.svg

....
curl -fsSL https://git.io/shellspec | sh
....

or

....
wget -O- https://git.io/shellspec | sh
....

NOTE: `https://git.io/shellspec` is redirected to
https://github.com/shellspec/shellspec/raw/master/install.sh[install.sh]

The installation using the web installer is mainly intended for
development use. For CI, it is recommended to use a specific version
(tag) in git or archives to avoid unexpected failures.

Advanced installation / upgrade

=== Automatic installation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1260.svg

....
curl -fsSL https://git.io/shellspec | sh -s -- --yes
....

=== Install the specified version

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1268.svg

....
curl -fsSL https://git.io/shellspec | sh -s 0.19.1
....

=== Upgrade to the latest release version

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1276.svg

....
curl -fsSL https://git.io/shellspec | sh -s -- --switch
....

=== Switch to the specified version

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1284.svg

....
curl -fsSL https://git.io/shellspec | sh -s 0.18.0 --switch
....

Uninstall

=== How to uninstall

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1294.svg

. Delete the ShellSpec executable file [default:
`$HOME/.local/bin/shellspec`].
. Delete the ShellSpec installation directory [default:
`$HOME/.local/lib/shellspec`].

Other usage

=== Other usage

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1305.svg

....
$ curl -fsSL https://git.io/shellspec | sh -s -- --help
Usage: [sudo] ./install.sh [VERSION] [OPTIONS...]
  or : wget -O- https://git.io/shellspec | [sudo] sh
  or : wget -O- https://git.io/shellspec | [sudo] sh -s -- [OPTIONS...]
  or : wget -O- https://git.io/shellspec | [sudo] sh -s VERSION [OPTIONS...]
  or : curl -fsSL https://git.io/shellspec | [sudo] sh
  or : curl -fsSL https://git.io/shellspec | [sudo] sh -s -- [OPTIONS...]
  or : curl -fsSL https://git.io/shellspec | [sudo] sh -s VERSION [OPTIONS...]

VERSION:
  Specify install version and method

  e.g
    1.0.0           Install 1.0.0 from git
    master          Install master from git
    1.0.0.tar.gz    Install 1.0.0 from tar.gz archive
    .               Install from local directory

OPTIONS:
  -p, --prefix PREFIX   Specify prefix                 [default: $HOME/.local]
  -b, --bin BIN         Specify bin directory          [default: <PREFIX>/bin]
  -d, --dir DIR         Specify installation directory [default: <PREFIX>/lib/shellspec]
  -s, --switch          Switch version (requires installation via git)
  -l, --list            List available versions (tags)
      --pre             Include pre-release
      --fetch FETCH     Force command to use when installing from archive (curl or wget)
  -y, --yes             Automatic yes to prompts
  -h, --help            You're looking at it
....

=== Package manager

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1340.svg

Arch Linux

Installation on Arch Linux from the AUR
https://aur.archlinux.org/packages/shellspec/[ShellSpec package] using
`aura`:

....
# Install the latest stable version
$ aura -A shellspec
....

Homebrew / Linuxbrew

....
# Install the latest stable version
$ brew tap shellspec/shellspec
$ brew install shellspec
....

basher / bpkg

Installation with https://github.com/basherpm/basher[basher]

*The officially supported version is ShellSpec 0.19.1 and later.*

....
# Install from master branch
$ basher install shellspec/shellspec

# To specify a version (example: 0.19.1)
$ basher install shellspec/shellspec@0.19.1
....

Installation with https://github.com/bpkg/bpkg[bpkg]

*The officially supported version is ShellSpec 0.19.1 and later.*

....
# Install from master branch
$ bpkg install shellspec/shellspec

# To specify a version (example: 0.19.1)
$ bpkg install shellspec/shellspec@0.19.1
....

=== Manual installation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1389.svg

git / archive (source code)

Download from git or archive and create a symbolic link.

From git

....
$ cd /SOME/WHERE/TO/INSTALL
$ git clone https://github.com/shellspec/shellspec.git

$ ln -s /SOME/WHERE/TO/INSTALL/shellspec/shellspec /EXECUTABLE/PATH/
....

From archive

....
$ cd /SOME/WHERE/TO/INSTALL
$ wget https://github.com/shellspec/shellspec/archive/{VERSION}.tar.gz
$ tar xzvf shellspec-{VERSION}.tar.gz

$ ln -s /SOME/WHERE/TO/INSTALL/shellspec-{VERSION}/shellspec /EXECUTABLE/PATH/
....

Executable path: e.g. `/usr/local/bin/`, `$HOME/bin/`

Use make instead of symbolic link creation

Download from git or archive and use `make` command.

*How to install.*

Install to `/usr/local/bin` and `/usr/local/lib`

....
sudo make install
....

Install to `$HOME/bin` and `$HOME/lib`

....
make install PREFIX=$HOME
....

*How to uninstall.*

....
sudo make uninstall
....

....
make uninstall PREFIX=$HOME
....

For environments that do not support symbolic links

Download from git or archive and create the following `shellspec` file
instead of the symbolic link.

....
$ cat<<'HERE'>/EXECUTABLE/PATH/shellspec
#!/bin/sh
exec /SOME/WHERE/TO/INSTALL/shellspec/shellspec "$@"
HERE
$ chmod +x /EXECUTABLE/PATH/shellspec
....

=== Distribution archive (runtime only)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1459.svg

See https://github.com/shellspec/shellspec/releases[Releases] page if
you want to download distribution archive.

=== Tutorial

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1466.svg

*Just create your project directory and run `shellspec --init` to setup
your project*

....
# Create your project directory, for example "hello".
$ mkdir hello
$ cd hello

# Initialize
$ shellspec --init
  create   .shellspec
  create   spec/spec_helper.sh

# Write your first specfile (of course you can use your favorite editor)
$ cat<<'HERE'>spec/hello_spec.sh
Describe 'hello.sh'
  Include lib/hello.sh
  It 'says hello'
    When call hello ShellSpec
    The output should equal 'Hello ShellSpec!'
  End
End
HERE

# Create lib/hello.sh
$ mkdir lib
$ touch lib/hello.sh

# It will fail because the hello function is not implemented.
$ shellspec

# Write hello function
$ cat<<'HERE'>lib/hello.sh
hello() {
  echo "Hello ${1}!"
}
HERE

# It will success!
$ shellspec
....

=== ShellSpec CLI

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1512.svg

=== runs specfile using `/bin/sh` by default

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1516.svg

ShellSpec CLI runs specfiles with the shell running `shellspec`. Usually
it is `/bin/sh` that is the shebang of `shellspec`. If you run
`bash shellspec`, it will be bash. `Include` files from specfile will be
executed in the same shell as well.

The purpose of this specification is to allow ShellSpec to easily change
multiple types of shells and enable the development of cross-platform
shell scripts that support multiple shells and environments.

If you want to test with a specific shell, use the `-s` (`--shell`)
option. You can specify the default shell in the `.shellspec` file.

NOTE: If you execute a *shell script file* (not a shell function) from
within the specfile, its shebang will be respected. Because in that
case, it will be run as an external command. The `-s` (`--shell`) option
also has no effect. If you are testing a external shell script file, you
can use `When run script` or `When run source`. These ignore the shebang
of external shell script file and run in the same shell that runs
specfile.

=== command options

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1540.svg

NOTE: Since version 0.28.0,
https://github.com/ko1nksm/getoptions[getoptions] is used to parse
options, so all POSIX and GNU compatible option syntax can be used. For
example, you can abbreviate a long option.

See more info:
link:/shellspec/shellspec/blob/master/docs/cli.md[ShellSpec CLI]

....
$ shellspec -h
Usage: shellspec [ -c ] [-C <directory>] [options...] [files or directories...]

  Using + instead of - for short options causes reverses the meaning

    -s, --shell SHELL               Specify a path of shell [default: "auto" (the shell running shellspec)]
        --require MODULE            Require a MODULE (shell script file)
    -O, --options PATH              Specify the path to an additional options file
    -I, --load-path PATH            Specify PATH to add to $SHELLSPEC_LOAD_PATH (may be used more than once)
        --helperdir DIRECTORY       The directory to load helper files (spec_helper.sh, etc) [default: "spec"]
        --path PATH                 Set PATH environment variable at startup
        --{no-}sandbox              Force the use of the mock instead of the actual command
        --sandbox-path PATH         Make PATH the sandbox path instead of empty [default: empty]
        --execdir @LOCATION[/DIR]   Specify the execution directory of each specfile | [default: @project]
    -e, --env NAME[=VALUE]          Set environment variable
        --env-from ENV-SCRIPT       Set environment variable from shell script file
    -w, --{no-}warning-as-failure   Treat warning as failure [default: enabled]
        --{no-}fail-fast[=COUNT]    Abort the run after first (or COUNT) of failures [default: disabled]
        --{no-}fail-no-examples     Fail if no examples found [default: disabled]
        --{no-}fail-low-coverage    Fail on low coverage [default: disabled]
        --failure-exit-code CODE    Override the exit code used when there are failing specs [default: 101]
        --error-exit-code CODE      Override the exit code used when there are fatal errors [default: 102]
    -p, --{no-}profile              Enable profiling and list the slowest examples [default: disabled]
        --profile-limit N           List the top N slowest examples [default: 10]
        --{no-}boost                Increase the CPU frequency to boost up testing speed [default: disabled]
        --log-file LOGFILE          Log file for %logger directive and trace [default: "/dev/tty"]
        --tmpdir TMPDIR             Specify temporary directory [default: $TMPDIR, $TMP or "/tmp"]
        --keep-tmpdir               Do not cleanup temporary directory [default: disabled]

  The following options must be specified before other options and cannot be specified in the options file

    -c, --chdir                     Change the current directory to the first path of arguments at the start
    -C, --directory DIRECTORY       Change the current directory at the start

  **** Execution ****

    -q, --{no-}quick                Run not-passed examples if it exists, otherwise run all [default: disabled]
    -r, --repair, --only-failures   Run failure examples only (Depends on quick mode)
    -n, --next-failure              Run failure examples and abort on first failure (Depends on quick mode)
    -j, --jobs JOBS                 Number of parallel jobs to run [default: 0 (disabled)]
        --random TYPE[:SEED]        Run examples by the specified random type | <[none]> [specfiles] [examples]
    -x, --xtrace                    Run examples with trace output of evaluation enabled [default: disabled]
    -X, --xtrace-only               Run examples with trace output only enabled [default: disabled]
        --dry-run                   Print the formatter output without running any examples [default: disabled]

  **** Output ****

        --{no-}banner               Show banner if exist "<HELPERDIR>/banner[.md]" [default: enabled]
        --reportdir DIRECTORY       Output directory of the report [default: "report"]
    -f, --format FORMATTER          Choose a formatter for display | <[p]> [d] [t] [j] [f] [null] [debug]
    -o, --output FORMATTER          Choose a generator(s) to generate a report file(s) [default: none]
        --{no-}color                Enable or disable color [default: enabled if the output is a TTY]
        --skip-message VERBOSITY    Mute skip message | <[verbose]> [moderate] [quiet]
        --pending-message VERBOSITY Mute pending message | <[verbose]> [quiet]
        --quiet                     Equivalent of --skip-message quiet --pending-message quiet
        --(show|hide)-deprecations  Show or hide deprecations details [default: show]

  **** Ranges / Filters / Focus ****

    You can run selected examples by specified the line numbers or ids

      shellspec path/to/a_spec.sh:10   # Run the groups or examples that includes lines 10
      shellspec path/to/a_spec.sh:@1-5 # Run the 5th groups/examples defined in the 1st group
      shellspec a_spec.sh:10:@1:20:@2  # You can mixing multiple line numbers and ids with join by ":"

    -F, --focus                     Run focused groups / examples only
    -P, --pattern PATTERN           Load files matching pattern [default: "*_spec.sh"]
    -E, --example PATTERN           Run examples whose names include PATTERN
    -T, --tag TAG[:VALUE]           Run examples with the specified TAG
        --default-path PATH         Set the default path where looks for examples [default: "spec"]

    You can specify the path recursively by prefixing it with the pattern "*/" or "**/"
      (This is not glob patterns and requires quotes. It is also available with --default-path)

      shellspec "*/spec"               # The pattern "*/" matches 1 directory
      shellspec "**/spec"              # The pattern "**/" matches 0 and more directories
      shellspec "*/*/**/test_spec.sh"  # These patterns can be specified multiple times

    -L, --dereference               Dereference all symlinks in in the above pattern [default: disabled]

  **** Coverage ****

        --covdir DIRECTORY          Output directory of the Coverage Report [default: coverage]
        --{no-}kcov                 Enable coverage using kcov [default: disabled]
        --kcov-path PATH            Specify kcov path [default: kcov]
        --kcov-options OPTIONS      Additional Kcov options (coverage limits, coveralls id, etc)

  **** Utility ****

        --init [TEMPLATE...]        Initialize your project with ShellSpec | [spec] [git] [hg] [svn]
        --gen-bin [@COMMAND...]     Generate test support commands in "<HELPERDIR>/support/bin"
        --count                     Count the number of specfiles and examples
        --list LIST                 List the specfiles/examples | [specfiles] [examples(:id|:lineno)]
        --syntax-check              Syntax check of the specfiles without running any examples
        --translate                 Output translated specfile
        --task [TASK]               Run the TASK or Show the task list if TASK is not specified
        --docker DOCKER-IMAGE       Run tests in specified docker image (EXPERIMENTAL)
    -v, --version                   Display the version
    -h, --help                      -h: short help, --help: long help
....

=== Project directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1654.svg

All specfiles for ShellSpec must be under the project directory. The
root of the project directory must have a `.shellspec` file. This file
is that specify the default options to be used in the project, but an
empty file is required even if the project has no options.

NOTE: The `.shellspec` file was described in the documentation as a
required file for some time, but ShellSpec worked without it. Starting
with version 0.28.0, this file is checked and will be required in future
versions.

You can easily create the necessary files by executing the
`shellspec --init` command in an existing directory.

=== Typical directory structure

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1671.svg

This is the typical directory structure. Version 0.28.0 allows many of
these to be changed by specifying options, supporting a more flexible
link:/shellspec/shellspec/blob/master/docs/directory_structure.md[directory
structure].

[source,notranslate]
----
<PROJECT-ROOT> directory
â”œâ”€ .shellspec                       [mandatory]
â”œâ”€ .shellspec-local                 [optional] Ignore from version control
â”œâ”€ .shellspec-quick.log             [optional] Ignore from version control
â”œâ”€ report/                          [optional] Ignore from version control
â”œâ”€ coverage/                        [optional] Ignore from version control
â”‚
â”œâ”€ bin/
â”‚   â”œâ”€ your_script1.sh
â”‚              :
â”œâ”€ lib/
â”‚   â”œâ”€ your_library1.sh
â”‚              :
â”‚
â”œâ”€ spec/ (also <HELPERDIR>)
â”‚   â”œâ”€ spec_helper.sh               [recommended]
â”‚   â”œâ”€ banner[.md]                  [optional]
â”‚   â”œâ”€ support/                     [optional]
â”‚   â”‚
â”‚   â”œâ”€ bin/
â”‚   â”‚   â”œâ”€ your_script1_spec.sh
â”‚   â”‚             :
â”‚   â”œâ”€ lib/
â”‚   â”‚   â”œâ”€ your_library1_spec.sh
----

=== Options file

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1708.svg

To change the default options for the `shellspec` command, create
options file(s). Files are read in the order shown below, options
defined last take precedence.

. `$XDG_CONFIG_HOME/shellspec/options`
. `$HOME/.shellspec-options` (version >= 0.28.0) or `$HOME/.shellspec`
(deprecated)
. `<PROJECT-ROOT>/.shellspec`
. `<PROJECT-ROOT>/.shellspec-local` (Do not store in VCS such as git)

Specify your default options with `$XDG_CONFIG_HOME/shellspec/options`
or `$HOME/.shellspec-options`. Specify default project options with
`.shellspec` and overwrite to your favorites with `.shellspec-local`.

=== `.shellspec` - project options file

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1726.svg

Specifies the default options to use for the project.

=== `.shellspec-local` - user custom options file

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1732.svg

Override the default options used by the project with your favorites.

=== `.shellspec-basedir` - specfile execution base directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1738.svg

Used to specify the directory in which the specfile will be run. See
link:/shellspec/shellspec/blob/master/docs/directory_structure.md[directory
structure] or `--execdir` option for details.

=== `.shellspec-quick.log` - quick execution log

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1746.svg

If this file is present, Quick mode will be enabled and the log of Quick
execution will be recorded. It created automatically when `--quick`
option is specified. If you want to turn off Quick mode, delete it.

=== `report/` - report file directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1754.svg

The output location for reports generated by the `--output` or
`--profile` options. This can be changed with the `--reportdir` option.

=== `coverage/` - coverage reports directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1761.svg

The output location for coverage reports. This can be changed with the
`--covdir` option.

=== `spec/` - (default) specfiles directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1768.svg

By default, it is assumed that all specfiles are store under the `spec`
directory, but it is possible to create multiple directories with
different names.

NOTE: In Version <= 0.27.x, the `spec` directory was the only directory
that contained the specfiles.

=== <HELPERDIR> (default: `spec/`)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1779.svg

The directory to store `spec_helper.sh` and other files. By default, the
`spec` directory also serves as `HELPERDIR` directory, but you can
change it to another directory with the `--helperdir` option.

=== `spec_helper.sh` - (default) helper file for specfile

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1787.svg

The `spec_helper.sh` is loaded to specfile by the
`--require spec_helper` option. This file is used to define global
functions, initial setting for examples, custom matchers, etc.

=== `banner[.md]` - banner file displayed at test execution

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1795.svg

If the file `<HELPERDIR>/banner` or `<HELPERDIR>/banner.md` exists,
Display a banner when the `shellspec` command is executed. It can be
used to display information about the tests. The `--no-banner` option
can be used to disable this behavior.

=== `support/` - directory for support files

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1804.svg

This directory can be used to store files such as custom matchers and
tasks.

=== `bin` - directory for support commands

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1811.svg

This directory is used to store link:#support-commands[support
commands].

=== Specfile (test file)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1818.svg

In ShellSpec, you write your tests in a specfile. By default, specfile
is a file ending with `_spec.sh` under the `spec` directory.

The specfile is executed using the `shellspec` command, but it can also
be executed directly. See link:#self-executable-specfile[self-executable
specfile] for details.

=== Example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1829.svg

....
Describe 'lib.sh' # example group
  Describe 'bc command'
    add() { echo "$1 + $2" | bc; }

    It 'performs addition' # example
      When call add 2 3 # evaluation
      The output should eq 5  # expectation
    End
  End
End
....

*The best place to learn how to write a specfile is the
link:/shellspec/shellspec/blob/master/examples/spec[examples/spec]
directory. You should take a look at it!* _(Those examples include
failure examples on purpose.)_

=== About DSL

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1851.svg

ShellSpec has its own DSL to write tests. It may seem like a distinctive
code because DSL starts with a capital letter, but the syntax is
compatible with shell scripts, and you can embed shell functions and use
https://github.com/koalaman/shellcheck[ShellCheck] to check the syntax.

You may feel rejected by this DSL, but It starts with a capital letter
to avoid confusion with the command, and it does a lot more than you
think, such as realizing scopes, getting shell-independent line numbers,
and workarounds for bugs in some shells.

=== Execution directory

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1865.svg

Since version 0.28.0, the working directory when running a specfile is
the project root directory by default. Even if you run a specfile from a
subdirectory in the project directory, it is the project root directory.
Before 0.27.x, it was the current directory when the `shellspec` command
was executed.

You can change this directory (location) by using the
`--execdir @LOCATION[/DIR]` option. You can choose from the following
locations and specify a path relative to the location if necessary.
However, you cannot specify a directory outside the project directory.

* `@project` Where the `.shellspec` file is located (project root)
[default]
* `@basedir` Where the `.shellspec` or `.shellspec-basedir` file is
located
* `@specfile` Where the specfile is located

If `@basedir` is specified, the parent directory is searched from the
directory containing the specfile to be run, and the first directory
where `.shellspec-basedir` or `.shellspec` is found is used as the
execution directory. This is useful if you want to have a separate
directory for each utility (command) you want to test.

NOTE: You will need to change under the project directory or use the
`-c` (`--chdir`) or `-C` (`--directory`) option before running the
specfile.

=== Embedded shell scripts

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1896.svg

You can embed shell functions (or shell script code) in the specfile.
This shell function can be used for test preparation and complex
testing.

Note that the specfile implements scope using subshells. Shell functions
defined in the specfile can only be used within blocks (e.g. `Describe`,
`It`, etc).

If you want to use a global function, you can define it in
`spec_helper.sh`.

=== Translation process

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1911.svg

The specfile will not be executed directly by the shell, but will be
translated into a regular shell script and output to a temporary
directory (default: `/tmp`) before being executed.

The translation process is simple in that it only replaces
forward-matched words (DSLs), with a few exceptions. If you are
interested in the translated code, you can see with
`shellspec --translate`.

=== Syntax formatter (`altshfmt`)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1924.svg

The specfile contains DSLs, so it cannot be properly formatted by
general shell script formatters. If you want to format the specfile, use
https://github.com/shellspec/altshfmt[altshfmt].

=== DSL syntax

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1932.svg

=== Basic structure

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1936.svg

=== `Describe`, `Context`, `ExampleGroup` - example group block

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1940.svg

`ExampleGroup` is a block for grouping example groups or examples.
`Describe` and `Context` are aliases for `ExampleGroup`. They can be
nested, and may contain example groups or examples.

....
Describe 'is example group'
  Describe 'is nestable'
    ...
  End

  Context 'is used to facilitate understanding depending on the context'
    ...
  End
End
....

The example groups can be optionally tagged. See link:#tagging[Tagging]
for details.

....
Describe 'is example group' tag1:value1 tag2:value2 ...
....

=== `It`, `Specify`, `Example` - example block

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1967.svg

`Example` is a block for writing an evaluation and expectations. `It`
and `Specify` are aliases for `Example`.

An example is composed by up to one evaluation and multiple
expectations.

....
add() { echo "$1 + $2" | bc; }

It 'performs addition'          # example
  When call add 2 3             # evaluation
  The output should eq 5        # expectation
  The status should be success  # another expectation
End
....

The examples can be optionally tagged. See link:#tagging[Tagging] for
details.

....
It 'performs addition' tag1:value1 tag2:value2 ...
....

=== `Todo` - one liner empty example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_1994.svg

`Todo` is the same as the empty example and is treated as a
link:++#pending---pending-example++[pending] example.

....
Todo 'will be used later when we write a test'

It 'is an empty example, the same as Todo'
End
....

=== `When` - evaluation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2008.svg

Evaluation executes a shell function or command for verification. Only
one evaluation can be defined for each example and also can be omitted.

See more details of
link:/shellspec/shellspec/blob/master/docs/references.md#evaluation[Evaluation]

NOTE: link:#about-executing-aliases[About executing aliases]

=== `call` - call a shell function (without subshell)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2020.svg

It calls a function without subshell. Practically, it can also run
commands.

....
When call add 1 2 # call `add` shell function with two arguments.
....

=== `run` - run a command (within subshell)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2031.svg

It runs a command within subshell. Practically, it can also call a shell
function. The command does not have to be a shell script.

NOTE: This does not support coverage measurement.

....
When run touch /tmp/foo # run `touch` command.
....

Some commands below are specially handled by ShellSpec.

=== `command` - runs an external command

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2046.svg

It runs a command, respecting shebang. It can not call a shell function.
The command does not have to be a shell script.

NOTE: This does not support coverage measurement.

....
When run command touch /tmp/foo # run `touch` command.
....

=== `script` - runs a shell script

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2059.svg

It runs a shell script, ignoring shebang. The script has to be a shell
script. It will be executed in another instance of the same shell as the
current shell.

....
When run script my.sh # run `my.sh` script.
....

=== `source` - runs a script by `.` (dot) command

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2071.svg

It sources a shell script, ignoring its shebang. The script has to be a
shell script. It is similar to `run script`, but with some differences.
Unlike `run script`, function-based mocking is available.

....
When run source my.sh # source `my.sh` script.
....

=== About executing aliases

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2083.svg

If you want to execute aliases, you need a workaround using `eval`.

....
alias alias-name='echo this is alias'
When call alias-name # alias-name: not found

# eval is required
When call eval alias-name

# When using embedded shell scripts
foo() { eval alias-name; }
When call foo
....

=== `The` - expectation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2101.svg

Expectation begins with `The` which does the verification. The basic
syntax is as follows:

....
The output should equal 4
....

Use `should not` for the opposite verification.

....
The output should not equal 4
....

=== Subjects

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2118.svg

The subject is the target of the verification.

....
The output should equal 4
      |
      +-- subject
....

There are `output` (`stdout`), `error` (`stdout`), `status`, `variable`,
`path`, etc. subjects.

Please refer to the
link:/shellspec/shellspec/blob/master/docs/references.md#subjects[Subjects]
for more details.

=== Modifiers

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2137.svg

The modifier concretizes the target of the verification (subject).

....
The line 2 of output should equal 4
      |
      +-- modifier
....

The modifiers are chainable.

....
The word 1 of line 2 of output should equal 4
....

If the modifier argument is a number, you can use an ordinal numeral
instead of a number.

....
The first word of second line of output should equal 4
....

There are `line`, `word`, `length`, `contents`, `result`, etc.
modifiers. The `result` modifier is useful for making the result of a
user-defined function the subject.

Please refer to the
link:/shellspec/shellspec/blob/master/docs/references.md#modifiers[Modifiers]
for more details.

=== Matchers

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2170.svg

The matcher is the verification.

....
The output should equal 4
                   |
                   +-- matcher
....

There are many matchers such as string matcher, status matcher, variable
matchers and stat matchers. The `satisfy` matcher is useful for
verification with user-defined functions.

Please refer to the
link:/shellspec/shellspec/blob/master/docs/references.md#matchers[Matchers]
for more details.

=== Language chains

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2190.svg

ShellSpec supports _language chains_ like
https://www.chaijs.com/[chai.js]. It only improves readability, does not
affect the expectation: `a`, `an`, `as`, `the`.

The following two sentences have the same meaning:

....
The first word of second line of output should valid number

The first word of the second line of output should valid as a number
....

=== `Assert` - expectation for custom assertion

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2206.svg

The `Assert` is yet another expectation to verify with a user-defined
function. It is designed for verification of side effects, not the
result of the evaluation.

....
still_alive() {
  ping -c1 "$1" >/dev/null
}

Describe "example.com"
  It "responses"
    Assert still_alive "example.com"
  End
End
....

=== Pending, skip and focus

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2226.svg

=== `Pending` - pending example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2230.svg

`Pending` is similar to `Skip`, but the test passes if the verification
fails, and the test fails if the verification succeeds. This is useful
if you want to specify that you will implement something later.

....
Describe 'Pending'
  Pending "not implemented"

  hello() { :; }

  It 'will success when test fails'
    When call hello world
    The output should "Hello world"
  End
End
....

=== `Skip` - skip example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2251.svg

Use `Skip` to skip executing the example.

....
Describe 'Skip'
  Skip "not exists bc"

  It 'is always skip'
    ...
  End
End
....

=== `if` - conditional skip

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2267.svg

Use `Skip if` if you want to skip conditionally.

....
Describe 'Conditional skip'
  not_exists_bc() { ! type bc >/dev/null 2>&1; }
  Skip if "not exists bc" not_exists_bc

  add() { echo "$1 + $2" | bc; }

  It 'performs addition'
    When call add 2 3
    The output should eq 5
  End
End
....

=== 'x' prefix for example group and example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2287.svg

=== `xDescribe`, `xContext`, `xExampleGroup` - skipped example group

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2291.svg

`xDescribe`, `xContext`, `xExampleGroup` are skipped example group
blocks. Execution of examples contained in these blocks is skipped.

....
Describe 'is example group'
  xDescribe 'is skipped example group'
    ...
  End
End
....

=== `xIt`, `xSpecify`, `xExample` - skipped example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2306.svg

`xIt`, `xSpecify`, `xExample` are skipped example blocks. Execution of
the example is skipped.

....
xIt 'is skipped example'
  ...
End
....

=== 'f' prefix for example group and example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2319.svg

=== `fDescribe`, `fContext`, `fExampleGroup` - focused example group

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2323.svg

`fDescribe`, `fContext`, `fExampleGroup` are focused example group
blocks. Only the examples included in these will be executed when the
`--focus` option is specified.

....
Describe 'is example group'
  fDescribe 'is focus example group'
    ...
  End
End
....

=== `fIt`, `fSpecify`, `fExample` - focused example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2339.svg

`fIt`, `fSpecify`, `fExample` are focused example blocks. Only these
examples will be executed when the `--focus` option is specified.

....
fIt 'is focused example'
  ...
End
....

=== About temporary pending and skip

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2352.svg

Using `Pending` or `Skip` without a message is a "temporary pending" or
"temporary skip". "x"-prefixed example groups and examples are also
treated as temporary skips.

The non-temporary `Pending` and `Skip` (with a message) are used when
the case will take a long time to resolve. It may be committed to a
version control system. Temporary pending and skip are used during
current work. We do not recommend committing them to a version control
system.

These two types differ in the display of the report. Refer to
`--skip-message` and `--pending-message` options.

....
# Temporary pending and skip
Pending
Skip
Skip # this comment will be displayed in the report
Todo
xIt
  ...
End

# Non-temporary pending and skip
Pending "reason"
Skip "reason"
Skip if "reason" condition
Todo "It will be implemented"
....

=== Hooks

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2386.svg

=== `BeforeEach` (`Before`), `AfterEach` (`After`) - example hook

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2390.svg

You can specify commands to be executed before / after each example by
`BeforeEach` (`Before`), `AfterEach` (`After`).

NOTE: `BeforeEach` and `AfterEach` are supported in version 0.28.0 and
later. Previous versions should use `Before` and `After` instead.

NOTE: `AfterEach` is for cleanup and not for assertions.

....
Describe 'example hook'
  setup() { :; }
  cleanup() { :; }
  BeforeEach 'setup'
  AfterEach 'cleanup'

  It 'is called before and after each example'
    ...
  End

  It 'is called before and after each example'
    ...
  End
End
....

=== `BeforeAll`, `AfterAll` - example group hook

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2419.svg

You can specify commands to be executed before / after all examples by
`BeforeAll` and `AfterAll`.

....
Describe 'example all hook'
  setup() { :; }
  cleanup() { :; }
  BeforeAll 'setup'
  AfterAll 'cleanup'

  It 'is called before/after all example'
    ...
  End

  It 'is called before/after all example'
    ...
  End
End
....

=== `BeforeCall`, `AfterCall` - call evaluation hook

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2443.svg

You can specify commands to be executed before / after call evaluation
by `BeforeCall` and `AfterCall`.

NOTE: These hooks were originally created to test ShellSpec itself.
Please use the `BeforeEach` / `AfterEach` hooks whenever possible.

....
Describe 'call evaluation hook'
  setup() { :; }
  cleanup() { :; }
  BeforeCall 'setup'
  AfterCall 'cleanup'

  It 'is called before/after call evaluation'
    When call hello world
    ...
  End
End
....

=== `BeforeRun`, `AfterRun` - run evaluation hook

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2467.svg

You can specify commands to be executed before / after run evaluation
(`run`, `run command`, `run script`, and `run source`) by `BeforeRun`
and `AfterRun`.

These hooks are executed in the same subshell as the "run evaluation".
Therefore, you can access the variables after executing the evaluation.

NOTE: These hooks were originally created to test ShellSpec itself.
Please use the `BeforeEach` / `AfterEach` hooks whenever possible.

....
Describe 'run evaluation hook'
  setup() { :; }
  cleanup() { :; }
  BeforeRun 'setup'
  AfterRun 'cleanup'

  It 'is called before/after run evaluation'
    When run hello world
    ...
  End
End
....

=== Pitfalls

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2495.svg

The hooks may fail in subtle ways if there is output to stderr, even if
the return code / exit code is `0`.

Commands like `git checkout` routinely write to stderr, even if there
was no actual failure, so be aware that your hooks may fail because of
this.

=== Helpers

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2506.svg

=== `Dump` - dump stdout, stderr, and status for debugging

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2510.svg

Dump stdout, stderr, and status of the evaluation. It is useful for
debugging.

....
When call echo hello world
Dump # stdout, stderr and status
....

=== `Include` - include a script file

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2522.svg

Include a shell script to test.

....
Describe 'lib.sh'
  Include lib.sh # hello function defined

  Describe 'hello()'
    It 'says hello'
      When call hello ShellSpec
      The output should equal 'Hello ShellSpec!'
    End
  End
End
....

=== `Set` - set shell options

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2541.svg

Set shell options before executing each example. The shell option name
is the long name of `set` or the name of `shopt`:

NOTE: Use `Set` instead of the `set` command because the `set` command
may not work as expected in some shells.

....
Describe 'Set helper'
  Set 'errexit:off' 'noglob:on'

  It 'sets shell options before executing the example'
    When call foo
  End
End
....

=== `Path`, `File`, `Dir` - path alias

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2561.svg

`Path` is used to define a short pathname alias. `File` and `Dir` are
aliases for `Path`.

....
Describe 'Path helper'
  Path hosts-file="/etc/hosts"

  It 'defines short alias for long path'
    The path hosts-file should exist
  End
End
....

=== `Data` - pass data as stdin to evaluation

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2578.svg

You can use the Data Helper which inputs data from stdin for evaluation.
The input data is specified after `#|` in the `Data` or `Data:expand`
block.

....
Describe 'Data helper'
  It 'provides with Data helper block style'
    Data # Use Data:expand instead if you want expand variables.
      #|item1 123
      #|item2 456
      #|item3 789
    End
    When call awk '{total+=$2} END{print total}'
    The output should eq 1368
  End
End
....

You can also use a file, function or string as data sources.

See more details of
link:/shellspec/shellspec/blob/master/docs/references.md#data[Data]

=== `Parameters` - parameterized example

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2605.svg

Parameterized tests (aka
https://en.wikipedia.org/wiki/Data-driven_testing[Data-driven testing])
are used to run the same test once for each set of parameters.
`Parameters` defines a block of parameters.

....
Describe 'example'
  Parameters
    "#1" 1 2 3
    "#2" 1 2 3
  End

  Example "example $1"
    When call echo "$(($2 + $3))"
    The output should eq "$4"
  End
End
....

In addition to the default `Parameters` block, three additional styles
are supported: `Parameters:value`, `Parameters:matrix` and
`Parameters:dynamic`.

See more details of
link:/shellspec/shellspec/blob/master/docs/references.md#parameters[Parameters]

NOTE: You can also combine the `Parameters` and `Data:expand` helpers.

=== `Mock` - create a command-based mock

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2637.svg

See link:#command-based-mock[Command-based mock]

=== `Intercept` - create an intercept point

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2643.svg

See link:#intercept[Intercept]

=== Directives

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2649.svg

Directives are instructions that can be used in embedded shell scripts.
It is used to solve small problems of shell scripts in testing.

This is like a shell function, but not a shell function. Therefore, the
supported grammar is limited and can only be used at the beginning of a
function definition or at the beginning of a line.

....
foo() { %puts "foo"; } # supported

bar() {
  %puts "bar" # supported
}

baz() {
  any command; %puts "baz" # not supported
}
....

=== `%const` (`%`) - constant definition

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2672.svg

`%const` (`%` is short hand) directive defines a constant value. The
characters which can be used for variable names are uppercase letters
`[A-Z]`, digits `[0-9]` and underscore `_` only. It can not be defined
inside an example group nor an example.

The value is evaluated during the specfile translation process. So you
can access ShellSpec variables, but you can not access variable or
function in the specfile.

This feature assumes use with conditional skip. The conditional skip may
run outside of the examples. As a result, sometimes you may need
variables defined outside of the examples.

=== `%text` - embedded text

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2689.svg

You can use the `%text` directive instead of a hard-to-use heredoc with
indented code. The input data is specified after `#|`.

....
Describe '%text directive'
  It 'outputs texts'
    output() {
      echo "start" # you can write code here
      %text
      #|aaa
      #|bbb
      #|ccc
      echo "end" # you can write code here
    }

    result() { %text
      #|start
      #|aaa
      #|bbb
      #|ccc
      #|end
    }

    When call output
    The output should eq "$(result)"
    The line 3 of output should eq 'bbb'
  End
End
....

=== `%puts` (`%-`), `%putsn` (`%=`) - output a string (with newline)

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2723.svg

`%puts` (put string) and `%putsn` (put string with newline) can be used
instead of (not portable) echo. Unlike echo, it does not interpret
escape sequences regardless of the shell. `%-` is an alias of `%puts`,
`%=` is an alias of `%putsn`.

=== `%printf` - alias for printf

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2732.svg

This is the same as `printf`, but it can be used in the sandbox mode
because the path has been resolved.

=== `%sleep` - alias for sleep

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2739.svg

This is the same as `sleep`, but it can be used in the sandbox mode
because the path has been resolved.

=== `%preserve` - preserve variables

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2746.svg

Use the `%preserve` directive to preserve the variables in subshells and
external shell scripts.

In the following cases, `%preserve` is required because variables are
not preserved.

* `When run` evaluation - It runs in a subshell.
* Command-based mock (`Mock`) - It is an external shell script.
* Function-based Mock called by command substitution

....
Describe '%preserve directive'
  It 'preserves variables'
    func() { foo=1; bar=2; baz=3; }
    preserve() { %preserve bar baz:BAZ; }
    AfterRun preserve

    When run func
    The variable foo should eq 1 # This will be failure
    The variable bar should eq 2 # This will be success
    The variable BAZ should eq 3 # Preserved to different variable (baz:BAZ)
  End
End
....

=== `%logger` - debug output

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2775.svg

Output log messages to the log file (default: `/dev/tty`) for debugging.

=== `%data` - define parameter

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2781.svg

See
link:/shellspec/shellspec/blob/master/docs/references.md#parametersdynamic[Parameters:dynamic].

=== Mocking

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2788.svg

There are two ways to create a mock, (shell) function-based mock and
(external) command-based mock. The function-based mock is usually
recommended for performance reasons. Both can be overwritten with an
internal block and will be restored when the block ends.

=== Function-based mock

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2797.svg

The (shell) function-based mock is simply (re)defined with a shell
function.

....
Describe 'function-based mock'
  get_next_day() { echo $(($(date +%s) + 86400)); }

  date() {
    echo 1546268400
  }

  It 'calls the date function'
    When call get_next_day
    The stdout should eq 1546354800
  End
End
....

=== Command-based mock

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2819.svg

The (external) command-based mock creates a temporary mock shell script
and runs as an external command. This is slow, but there are some
advantages over the function-based mock.

* Can be use invalid characters as the shell function name.
** e.g. `docker-compose` (`-` cannot be used as a function name in
POSIX)
* Can be invoke a mocked command from an external command (not limited
to shell script).

A command-based mock creates an external shell script with the contents
of a `Mock` block, so there are some restrictions.

* It is not possible to mock shell functions or shell built-in
functions.
* It is not possible to call shell functions outside the `Mock` block.
** Exception: Can be called exported (`export -f`) functions. (bash
only)
* To reference variables outside the `Mock` block, they must be
exported.
* To return a variable from a Mock block, you need to use the
`%preserve` directive.

....
Describe 'command-based mock'
  get_next_day() { echo $(($(date +%s) + 86400)); }

  Mock date
    echo 1546268400
  End

  It 'runs the mocked date command'
    When call get_next_day
    The stdout should eq 1546354800
  End
End
....

NOTE: To achieve this feature, a directory for mock commands is included
at the beginning of the `PATH`.

=== Support commands

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2864.svg

=== Execute the actual command within a mock function

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2868.svg

Support commands are helper commands that can be used in the specfile.
For example, it can be used in a mock function to execute the actual
command. It is recommended that the support command name be the actual
command name prefixed with `@`.

....
Describe "Support commands example"
  touch() {
    @touch "$@" # @touch executes actual touch command
    echo "$1 was touched"
  }

  It "touch a file"
    When run touch "file"
    The output should eq "file was touched"
    The file "file" should exist
  End
End
....

Support commands are generated in the `spec/support/bin` directory by
the `--gen-bin` option. For example run `shellspec --gen-bin @touch` to
generate the `@touch` command.

This is the main purpose, but support commands are just shell scripts,
so they can also be used for other purposes. You can freely edit the
support command script.

=== Make mock not mandatory in sandbox mode

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2900.svg

The sandbox mode forces the use of mocks. However, you may not want to
require mocks for some commands. For example, `printf` is a built-in
command in many shells and does not require a mock in the sandbox mode
for these shells. But there are shells where it is an external command
and then it requires to be mocked.

To allow `printf` to be called without mocking in certain cases, create
a support command named `printf` (`shellspec --gen-bin printf`).

=== Resolve command incompatibilities

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2913.svg

Some commands have different options between BSD and GNU. If you handle
the difference in the specfile, the test will be hard to read. You can
solve it with the support command.

....
#!/bin/sh -e
# Command name: @sed
. "$SHELLSPEC_SUPPORT_BIN"
case $OSTYPE in
  *darwin*) invoke gsed "$@" ;;
  *) invoke sed "$@" ;;
esac
....

=== Tagging

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2931.svg

The example groups or examples can be tagged, and the `--tag` option can
be used to filter the examples to be run. The tag name and tag value are
separated by `:`, and the tag value is optional. You can use any
character if quoted.

....
Describe "Checking something" someTag:someVal
  It "does foo" tagA:val1
    ...
  It "does bar" tagA:val2
    ...
  It "does baz" tagA
    ...
End
....

. Everything nested inside a selected element is selected in parent
elements. e.g. `--tag someTag` will select everything above.
. Specifying a tag but no value selects everything with that tag whether
or not it has a value, e.g. `--tag tagA` will select everything above.
. Specifying multiple tags will select the union of everything tagged,
e.g. `--tag tagA:val1,tagA:val2` will select `does foo` and `does bar`.
. Tests included multiple times are not a problem, e.g.
`--tag someTag,tagA,tagA:val1` just selects everything.
. If no tag matches, nothing will be run, e.g. `--tag tagA:` runs
nothing (it does not match baz above, as empty values are not the same
as no value).
. The --tag option can be used multiple times, e.g.
`--tag tagA:val1 --tag tagA:val2` works the same as
`--tag tagA:val1,tagA:val2`

=== About testing external commands

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2966.svg

ShellSpec is a testing framework for shell scripts, but it can be used
to test anything that can be executed as an external command, even if it
is written in another language. Even shell scripts can be tested as
external commands.

If you are testing a shell script as an external command, please note
the following.

* It will be executed in the shell specified by the shebang not the
shell running the specfile.
* The coverage of the shell script will not be measured.
* Cannot refer to variables inside the shell script.
* Shell built-in commands cannot be mocked.
* Functions defined inside the shell script cannot be mocked.
* Only command-based mock can be used (if the script is calling an
external command).
* Interceptor is not available.

To get around these limitations, use `run script` or `run source`. See
link:#how-to-test-a-single-file-shell-script[How to test a single file
shell script].

=== How to test a single file shell script

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_2992.svg

If the shell script consists of a single file, unit testing becomes
difficult. However, there are many such shell scripts.

ShellSpec has the ability to testing in such cases with only few
modifications to the shell script.

=== Using `run script`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3002.svg

Unlike the case of executing as an
link:#about-testing-external-commands[external command], it has the
following features.

* It will run in the same shell (but another process) that is running
specfile.
* The coverage of the shell script will be measured.

There are limitations as follows.

* Cannot refer to variables inside the shell script.
* Shell built-in commands cannot be mocked.
* Functions defined inside the shell script cannot be mocked.
* Only command-based mock can be used (if the script is calling an
external command).
* Interceptor is not available.

=== Using `run source`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3023.svg

It is even less limitations than `run script` and has the following
features.

* It will run in the same shell and same process that is running
specfile.
* The coverage of the shell script will be measured.
* Can be refer to variables inside the shell script.
* Function-based mock and command-based mock are available.
* Interceptor is available.
* Shell built-in commands can be mocked.
* Functions defined inside the shell script can be mocked using
interceptor.

However, since it is simulated using the `.` command, there are some
differences in behavior. For example, the value of `$0` is different.

NOTE: Mocking of shell built-in commands can be done before
`run source`. However, if you are using interceptor, mocking of the
`test` command must be done in the `__<name>__` function.

=== Testing shell functions

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3047.svg

=== `__SOURCED__`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3051.svg

This is the way to test shell functions defined in a shell script.

Loading a script with `Include` defines a `__SOURCED__` variable
available in the sourced script. If the variable `__SOURCED__` is
defined, please return from the shell script.

....
#!/bin/sh
# hello.sh

hello() { echo "Hello $1"; }

# This is the writing style presented by ShellSpec, which is short but unfamiliar.
# Note that it returns the current exit status (could be non-zero).
${__SOURCED__:+return}

# The above means the same as below.
# ${__SOURCED__:+x} && return $?

# If you don't like the coding style, you can use the general writing style.
# if [ "${__SOURCED__:+x}" ]; then
#   return 0
# fi

hello "$1"
....

....
Describe "hello.sh"
  Include "./hello.sh"

  Describe "hello()"
    It "says hello"
      When call hello world
      The output should eq "Hello world"
    End
  End
End
....

=== Intercepting

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3095.svg

Interceptor is a feature that allows you to intercept your shell script
in the middle of its execution. This makes it possible to mock functions
that cannot be mocked in advance at arbitrary timing, and to make
assertions by retrieving the state of during script execution.

It is a powerful feature, but avoid using it as possible, because it
requires you to modify your code and may reduce readability. Normally,
it is not a good idea to modify the code just for testing, but in some
cases, there is no choice but to use this.

....
#!/bin/sh
# ./today.sh

# When run directly without testing, the "__()" function does nothing.
test || __() { :; }

# the "now()" function is defined here, so it can't be mocked in advance.
now() { date +"%Y-%m-%d %H:%M:%S"; }

# The function you want to test
today() {
  now=$(now)
  echo "${now% *}"
}

# I want to mock the "now()" function here.
__ begin __

today=$(today)
echo "Today is $today"

__ end __
....

....
Describe "today.sh"
  Intercept begin
  __begin__() {
    now() { echo "2021-01-01 01:02:03"; }
  }
  __end__() {
    # The "run source" is run in a subshell, so you need to use "%preserve"
    # to preserve variables
    %preserve today
  }

  It "gets today's date"
    When run source ./today.sh
    The output should eq "Today is 2021-01-01"
    The variable today should eq "2021-01-01"
  End
End
....

=== `Intercept`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3154.svg

Usage: `Intercept [<name>...]`

Specify the name(s) to intercept.

NOTE: I will change `Intercept` to `Interceptors` to make it a
declarative DSL.

=== `test || __() { :; }`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3165.svg

Define the `__` function that does nothing except when run as a test
(via ShellSpec). This allows you to run it as a production without
changing the code.

The `test` command is the shell built-in `test` command. This command
returns false (non-zero) when called with no arguments. This will allow
who are not familiar with ShellSpec to will understand what the result
will be, even if they don't know what the code is for. Of course, it is
good practice to comment on what the code is for

When run via ShellSpec, the `test` command is redefined and returns true
"only once" when called with no arguments. After that, it will return to
its original behavior. This means that this code needs to be executed
only once, at the start of the shell script.

=== `__`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3184.svg

Usage: `__ <name> [arguments...] __`

This is where the process is intercepted. You can define more than one.
If the name matches the name specified in `Intercept`, the `__<name>__`
function will be called.

Note that if the name is not specified in `Intercept`, nothing will be
done, but the exit status will be changed to 0.

=== spec_helper

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3197.svg

The `spec_helper` can be used to set shell options for all specfiles,
define global functions,check the execution shell, load custom matchers,
etc.

The `spec_helper` is the default module name. It can be changed to any
other name, and multiple modules can be used. Only characters accepted
by POSIX as identifiers can be used in module names. The file name of
the module must be the module name with the extension `.sh` appended. It
is loaded from `SHELLSPEC_LOAD_PATH` using the `--require` option.

The following is a typical `spec_helper`. The following three callback
functions are available.

....
# Filename: spec/spec_helper.sh

set -eu

spec_helper_precheck() {
  minimum_version "0.28.0"
  if [ "$SHELL_TYPE" != "bash" ]; then
    abort "Only bash is supported."
  fi
}

spec_helper_loaded() {
  : # In most cases, you won't use it.
}

spec_helper_configure() {
  import 'support/custom_matcher'
  before_each "global_before_each_hook"
}

# User-defined global function
global_before_each_hook() {
  :
}

# In version <= 0.27.x, only shellspec_spec_helper_configure was available.
# This callback function is still supported but deprecated in the future.
# Please rename it to spec_helper_configure.
# shellspec_spec_helper_configure() {
#  :
# }
....

The `spec_helper` will be loaded at least twice. The first time is at
precheck phase, which is executed in a separate process before the
specfile execution. The second time will be load at the beginning of the
specfile execution. If you are using parallel execution, it will be
loaded every specfile.

Within each callback function, there are several helper functions
available. These functions are not available outside of the callback
function. Also, these callback functions will be removed automatically
when `spec_helper` is finished loading. (User-defined functions will not
be removed.)

=== `<module>_precheck`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3260.svg

This callback function will be invoked only once before loading
specfiles. Exit with `exit` or `abort`, or `return` non-zero to exit
without executing specfiles. Inside this function, `set -eu` is
executed, so an explicit return on error is not necessary.

Since it is invoked in a separate process from specfiles, changes made
in this function will not be affected in specfiles.

=== `minimum_version`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3272.svg

* Usage: `minimum_version <version>`

Specifies the minimum version of ShellSpec that the specfile supports.
The version format is https://semver.org/[semantic version]. Pre-release
versions have a lower precedence than the associated normal version, but
comparison between pre-release versions is not supported. The build
metadata will simply be ignored.

NOTE: Since `<module>_precheck` is only available in 0.28.0 or later, it
can be executed with earlier ShellSpecs even if minimum_version is
specified. To avoid this, you can implement a workaround using
`--env-from`.

....
# spec/env.sh
# Add `--env-from spec/env.sh` to `.shellspec`
major_minor=${SHELLSPEC_VERSION%".${SHELLSPEC_VERSION#*.*.}"}
if [ "${major_minor%.*}" -eq 0 ] && [ "${major_minor#*.}" -lt 28 ]; then
  echo "ShellSpec version 0.28.0 or higher is required." >&2
  exit 1
fi
....

=== `error`, `warn`, `info`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3299.svg

* Usage: `error [messages...]`
* Usage: `warn [messages...]`
* Usage: `info [messages...]`

Outputs a message according to the type. You can also use `echo` or
`printf`.

=== `abort`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3310.svg

* Usage: `abort [messages...]`
* Usage: `abort <exit status> [messages...]`

Display an error message and `exit`. If the exit status is omitted, it
is `1`. You can also exit with exit. `exit 0` will exit normally without
executing the specfiles.

=== `setenv`, `unsetenv`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3321.svg

* Usage: `setenv [name=value...]`
* Usage: `unset [name...]`

You can use `setenv` or `unsetenv` to pass or remove environment
variables from precheck to specfiles.

=== environment variables

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3331.svg

The following environment variables are defined.

* `VERSION` - ShellSpec Version
* `SHELL_TYPE` - Currently running shell type (e.g. `bash`)
* `SHELL_VERSION` - Currently running shell version (e.g.
`4.4.20(1)-release`)

NOTE: Be careful not to confuse `SHELL_TYPE` with the environment
variable `SHELL`. The environment variable `SHELL` is the user login
shell, not the currently running shell. It is a variable set by the
system, and which unrelated to ShellSpec.

=== `<module>_loaded`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3347.svg

It is called after loading the shellspec's general internal functions,
but before loading the core modules (subject, modifier, matcher, etc).
If parallel execution is enabled, it may be called multiple times in
isolated processes. Internal functions starting with `shellspec_` can
also be used, but be aware that they may change.

This was created to perform
link:/shellspec/shellspec/blob/master/helper/ksh_workaround.sh[workarounds]
for specific shells in order to test ShellSpec itself. Other than that,
I have not come up with a case where this is absolutely necessary, but
if you have one, please let me know.

=== `<module>_configure`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3363.svg

This callback function will be called after core modules (subject,
modifier, matcher, etc) has been loaded. If parallel execution is
enabled, it may be called multiple times in isolated processes. Internal
functions starting with `shellspec_` can also be used, but be aware that
they may change. It can be used to set global hooks, load custom
matchers, etc., and override core module functions.

=== `import`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3374.svg

* Usage: `import <module> [arguments...]`

Import a custom module from `SHELLSPEC_LOAD_PATH`.

=== `before_each`, `after_each`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3382.svg

* Usage: `before_each [hooks...]`
* Usage: `after_each [hooks...]`

Register hooks to be executed before and after every example. It is the
same as executing `BeforeEach`/`AfterEach` at the top of all specfiles.

=== `before_all`, `after_all`

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3392.svg

* Usage: `before_all [hooks...]`
* Usage: `after_all [hooks...]`

Register hooks to be executed before and after all example. It is the
same as executing `BeforeAll`/`AfterAll` at the top of all specfiles.

NOTE: This is a hook that is called before and after each specfile, not
before and after all specfiles.

=== Self-executable specfile

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3405.svg

Add `eval "$(shellspec - -c) exit 1"` to the top of the specfile and
give execute permission to the specfile. You can use `/bin/sh`,
`/usr/bin/env bash`, etc. for shebang. The specfile will be run in the
shell written in shebang.

....
#!/bin/sh

eval "$(shellspec - -c) exit 1"

# Use the following if version <= 0.27.x
# eval "$(shellspec -)"

Describe "bc command"
  bc() { echo "$@" | command bc; }

  It "performs addition"
    When call bc "2+3"
    The output should eq 5
  End
End
....

The `-c` option is available since 0.28.0, and you can also pass other
options. If you run the specfile directly, `--pattern` will be
automatically set to `*`. These options will be ignored if run via
`shellspec` command.

The use of `shellspec` as shebang is deprecated because it is not
portable.

....
#!/usr/bin/env shellspec -c
Linux does not allow passing options

#!/usr/bin/env -S shellspec -c
The -S option requires GNU Core Utilities 8.30 (2018-07-01) or later.
....

=== Use with Docker

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3448.svg

You can run ShellSpec without installation using Docker. ShellSpec and
specfiles run in a Docker container.

See link:/shellspec/shellspec/blob/master/docs/docker.md[How to use
ShellSpec with Docker].

=== Extension

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3458.svg

=== Custom subject, modifier and matcher

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3462.svg

You can create custom subject, custom modifier and custom matcher.

See
link:/shellspec/shellspec/blob/master/examples/spec/support/custom_matcher.sh[examples/spec/support/custom_matcher.sh]
for custom matcher.

NOTE: If you want to verify using shell function, you can use
link:/shellspec/shellspec/blob/master/docs/references.md#result[result]
modifier or
link:/shellspec/shellspec/blob/master/docs/references.md#satisfy[satisfy]
matcher. You don't need to create a custom matcher, etc.

=== Code Coverage

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3478.svg

ShellSpec has integrated coverage feature. To use this feature
https://github.com/SimonKagstrom/kcov[Kcov] (v38 or later) is required.

=== Supported shells

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3485.svg

Supported only in *bash*, *zsh*, and *ksh*, where `DEBUG` trap is
implemented. However, we recommend latest *bash* for the following
reasons.

* bash (older versions): There seems to be some code that cannot be
measured correctly.
* zsh: There seems to be some code that cannot be measured correctly,
and the measurement rate will be the lowest.
* ksh: ksh93u+ and ksh2020 may have side effects on exit status when
DEBUG trap is enabled due to a bug. This bug has been
https://github.com/ksh93/ksh/issues/155[fixed] in
https://github.com/ksh93/ksh[ksh93u+m]. These are also prone to
instability, especially with ksh2020 (which has been abandoned).

In any shell, some code may not be measured correctly (e.g., code
containing `eval` or newline). These are limitations and problems caused
by shells and Kcov.

=== Measurement target

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3507.svg

ShellSpec measures only the necessary codes to improve the measurement
speed. Also, there are some things that cannot be measured due to
implementation.

* The shell scripts loaded by `Include` will be measured.
* The shell functions called by the `When` evaluation will be measured.
* The shell scripts executed by the `When run script` evaluation will be
measured.
* The shell scripts executed by the `When run source` evaluation will be
measured.
* The external commands executed by the `When` evaluation will NOT be
measured.
** Even if it is a shell script, it is not measured when it is executed
as an external command.
* If other than the above, it will not be measured.

By default only shell scripts whose names contain `.sh` are coverage
targeted. If you want to include other files, you need to adjust options
with `--kcov-options`.

....
# Default kcov (coverage) options
--kcov-options "--include-path=. --path-strip-level=1"
--kcov-options "--include-pattern=.sh"
--kcov-options "--exclude-pattern=/.shellspec,/spec/,/coverage/,/report/"

# Example: Include script "myprog" with no extension
--kcov-options "--include-pattern=.sh,myprog"

# Example: Only specified files/directories
--kcov-options "--include-pattern=myprog,/lib/"
....

=== Coverage report

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3544.svg

[Coverage report][coverage] and `cobertura.xml` and `sonarqube.xml`
files are generated under the coverage directory by Kcov. You can easily
integrate with https://coveralls.io/[Coveralls],
https://codeclimate.com/[Code Climate], https://codecov.io/[Codecov],
etc.

=== For developers

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3554.svg

=== Subprojects

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3558.svg

=== ShellMetrics - Cyclomatic Complexity Analyzer for shell scripts

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3562.svg

URL: https://github.com/shellspec/shellmetrics

=== ShellBench - A benchmark utility for POSIX shell comparison

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3568.svg

URL: https://github.com/shellspec/shellbench

=== altshfmt - AltSH (alternative shell script) formatter

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3574.svg

URL: https://github.com/shellspec/altshfmt

=== Related projects

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3580.svg

=== getoptions - An elegant option parser and generator for shell scripts

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3584.svg

URL: https://github.com/ko1nksm/getoptions

=== readlinkf - readlink -f implementation for shell scripts

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3590.svg

URL: https://github.com/ko1nksm/readlinkf

=== portable-echo - Portable echo shell function for POSIX compliant shells

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3596.svg

URL: https://github.com/ko1nksm/portable-echo.sh

=== Inspired frameworks

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3602.svg

* https://rspec.info/[RSpec] - Behaviour Driven Development for Ruby
* https://jestjs.io/%5D[Jest] - Delightful JavaScript Testing
* https://mochajs.org/[Mocha] - the fun, simple, flexible JavaScript
test framework
* https://jasmine.github.io/[Jasmine] - Behavior-Driven JavaScript
* https://onsi.github.io/ginkgo/[Ginkgo] - A Golang BDD Testing
Framework
* https://junit.org/junit5/[JUnit 5] - The programmer-friendly testing
framework for Java

=== Contributions

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3616.svg

All contributions are welcome!

ShellSpec uses a peculiar coding style to assure high performance,
reliability and portability, and the external commands allowed to use
are greatly restricted.

We recommend that you create WIP PR early or offer suggestions in
discussions to avoid ruining your work.

See
link:/shellspec/shellspec/blob/master/CONTRIBUTING.md[CONTRIBUTING.md]

'''''

Author: Koichi Nakashima (https://github.com/ko1nksm[ko1nksm])

=== About

A full-featured BDD unit testing framework for bash, ksh, zsh, dash and
all POSIX shells

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3639.svg
[.flex-auto .min-width-0 .css-truncate .css-truncate-target .width-fit]#
https://shellspec.info[shellspec.info] #

==== Topics

link:/topics/testing[testing] link:/topics/shell[shell]
link:/topics/mock[mock] link:/topics/bash[bash] link:/topics/zsh[zsh]
link:/topics/coverage[coverage] link:/topics/tdd[tdd]
link:/topics/script[script] link:/topics/test[test]
link:/topics/bdd[bdd] link:/topics/dash[dash]
link:/topics/shell-script[shell-script] link:/topics/ksh[ksh]
link:/topics/posix-sh[posix-sh]
link:/topics/posix-compliant[posix-compliant] link:/topics/kcov[kcov]
link:/topics/shellspec[shellspec]

==== Resources

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3657.svg
Readme]

==== License

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3662.svg
MIT license]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3665.svg
[.color-fg-muted]#Activity#]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3668.svg
[.color-fg-muted]#Custom properties#]

==== Stars

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3673.svg
*1.2k* stars]

==== Watchers

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3678.svg
*21* watching]

==== Forks

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3683.svg
*73* forks]

link:/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fshellspec%2Fshellspec&report=shellspec+%28user%29[Report
repository]

=== link:/shellspec/shellspec/releases[Releases [.Counter]#39#]

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3691.svg

[.css-truncate .css-truncate-target .text-bold .mr-2]#0.28.1#
[.Label .Label--success .flex-shrink-0]# Latest #

Jan 11, 2021

link:/shellspec/shellspec/releases[+ 38 releases]

=== Sponsor this project

Â 

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3704.svg
Sponsor

link:/sponsors[Learn more about GitHub Sponsors]

=== link:/shellspec/shellspec/graphs/contributors[Contributors [.Counter .ml-1]#18#]

* https://github.com/ko1nksm[image:https://avatars.githubusercontent.com/u/2453619?s=64&v=4[@ko1nksm,width=32,height=32]]
* https://github.com/robert-gurol-signavio[image:https://avatars.githubusercontent.com/u/3638005?s=64&v=4[@robert-gurol-signavio,width=32,height=32]]
* https://github.com/damienflament[image:https://avatars.githubusercontent.com/u/2023682?s=64&v=4[@damienflament,width=32,height=32]]
* https://github.com/AntoniMarcinek[image:https://avatars.githubusercontent.com/u/48458509?s=64&v=4[@AntoniMarcinek,width=32,height=32]]
* https://github.com/ldicarlo[image:https://avatars.githubusercontent.com/u/15803534?s=64&v=4[@ldicarlo,width=32,height=32]]
* https://github.com/leonstafford[image:https://avatars.githubusercontent.com/u/2066833?s=64&v=4[@leonstafford,width=32,height=32]]
* https://github.com/rowanthorpe[image:https://avatars.githubusercontent.com/u/604508?s=64&v=4[@rowanthorpe,width=32,height=32]]
* https://github.com/FunTimeCoding[image:https://avatars.githubusercontent.com/u/1647065?s=64&v=4[@FunTimeCoding,width=32,height=32]]
* https://github.com/NReilingh[image:https://avatars.githubusercontent.com/u/2458645?s=64&v=4[@NReilingh,width=32,height=32]]
* https://github.com/eltociear[image:https://avatars.githubusercontent.com/u/22633385?s=64&v=4[@eltociear,width=32,height=32]]
* https://github.com/apps/dependabot[image:https://avatars.githubusercontent.com/in/29110?s=64&v=4[@dependabot[bot],width=32,height=32]]
* https://github.com/hoijui[image:https://avatars.githubusercontent.com/u/42907?s=64&v=4[@hoijui,width=32,height=32]]
* https://github.com/somasis[image:https://avatars.githubusercontent.com/u/264788?s=64&v=4[@somasis,width=32,height=32]]
* https://github.com/mmpestorich[image:https://avatars.githubusercontent.com/u/979523?s=64&v=4[@mmpestorich,width=32,height=32]]

link:/shellspec/shellspec/graphs/contributors[+ 4 contributors]

=== Languages

[.Progress]# [.Progress-item .color-bg-success-emphasis]##
[.Progress-item .color-bg-success-emphasis]##
[.Progress-item .color-bg-success-emphasis]## #

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3734.svg
[.color-fg-default .text-bold .mr-1]#Shell# 94.7%]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3736.svg
[.color-fg-default .text-bold .mr-1]#Dockerfile# 5.0%]
* [.d-inline-flex .flex-items-center .flex-nowrap .text-small .mr-3]#
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3739.svg
[.color-fg-default .text-bold .mr-1]#Other# 0.3% #

== Footer

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3744.svg
Â© 2025 GitHub,Â Inc.

[[sr-footer-heading]]
=== Footer navigation

* https://docs.github.com/site-policy/github-terms/github-terms-of-service[Terms]
* https://docs.github.com/site-policy/privacy-policies/github-privacy-statement[Privacy]
* https://github.com/security[Security]
* https://www.githubstatus.com/[Status]
* https://docs.github.com/[Docs]
* https://support.github.com?tags=dotcom-footer[Contact]
* Manage cookies
* Do not share my personal information

[[ajax-error-message]]
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3760.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3762.svg

You canâ€™t perform that action at this time.

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3766.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3768.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3769.svg

image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3771.svg
image:~//home/stingll/GIT/Github-vastingll/20250305_1305mmd/ShellScriptå¤§å…¨/11.å‚è€ƒ/11-2/11-2_3772.svg

[[js-global-screen-reader-notice]]

[[js-global-screen-reader-notice-assertive]]
